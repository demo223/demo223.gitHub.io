<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1 AOP | å‘¨å²çš„ä¸ªäººåšå®¢</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="logo.jpg">
    <meta name="description" content="ä¸ªäººæŠ€æœ¯åšå®¢">
    
    <link rel="preload" href="/assets/css/0.styles.8c53e149.css" as="style"><link rel="preload" href="/assets/js/app.a19eb3cb.js" as="script"><link rel="preload" href="/assets/js/2.34fff606.js" as="script"><link rel="preload" href="/assets/js/1.16393a26.js" as="script"><link rel="preload" href="/assets/js/98.9d539c75.js" as="script"><link rel="prefetch" href="/assets/js/10.717bd423.js"><link rel="prefetch" href="/assets/js/100.c5cd47b0.js"><link rel="prefetch" href="/assets/js/101.7151b423.js"><link rel="prefetch" href="/assets/js/102.6b36385a.js"><link rel="prefetch" href="/assets/js/103.d3861779.js"><link rel="prefetch" href="/assets/js/104.9578b311.js"><link rel="prefetch" href="/assets/js/105.aae477dc.js"><link rel="prefetch" href="/assets/js/106.1d5215a7.js"><link rel="prefetch" href="/assets/js/107.3c330c2f.js"><link rel="prefetch" href="/assets/js/108.cefc2802.js"><link rel="prefetch" href="/assets/js/109.541aa22e.js"><link rel="prefetch" href="/assets/js/11.e0bfb9a4.js"><link rel="prefetch" href="/assets/js/110.60e0b929.js"><link rel="prefetch" href="/assets/js/111.45058523.js"><link rel="prefetch" href="/assets/js/112.d10d50d0.js"><link rel="prefetch" href="/assets/js/113.4a3deb35.js"><link rel="prefetch" href="/assets/js/114.b917d1a1.js"><link rel="prefetch" href="/assets/js/115.50e3fa0f.js"><link rel="prefetch" href="/assets/js/116.78f04bf7.js"><link rel="prefetch" href="/assets/js/117.b5372645.js"><link rel="prefetch" href="/assets/js/118.f990eb5b.js"><link rel="prefetch" href="/assets/js/119.f178eabd.js"><link rel="prefetch" href="/assets/js/12.bdf46c02.js"><link rel="prefetch" href="/assets/js/120.d98a3aa8.js"><link rel="prefetch" href="/assets/js/121.abcdf60f.js"><link rel="prefetch" href="/assets/js/122.ed3550a9.js"><link rel="prefetch" href="/assets/js/123.8ef421f8.js"><link rel="prefetch" href="/assets/js/124.1adba2c7.js"><link rel="prefetch" href="/assets/js/125.6706c196.js"><link rel="prefetch" href="/assets/js/126.1e50c7b4.js"><link rel="prefetch" href="/assets/js/127.be9df6e0.js"><link rel="prefetch" href="/assets/js/128.9e68fe60.js"><link rel="prefetch" href="/assets/js/129.f9313e6a.js"><link rel="prefetch" href="/assets/js/13.05b00624.js"><link rel="prefetch" href="/assets/js/130.87d4d918.js"><link rel="prefetch" href="/assets/js/131.b7ab0bc3.js"><link rel="prefetch" href="/assets/js/132.4bf1103a.js"><link rel="prefetch" href="/assets/js/133.2bda9aa2.js"><link rel="prefetch" href="/assets/js/134.e6631028.js"><link rel="prefetch" href="/assets/js/135.5b78aed3.js"><link rel="prefetch" href="/assets/js/136.377fd687.js"><link rel="prefetch" href="/assets/js/137.623e1a9d.js"><link rel="prefetch" href="/assets/js/138.c2e1c9a1.js"><link rel="prefetch" href="/assets/js/139.6263f657.js"><link rel="prefetch" href="/assets/js/14.092a5584.js"><link rel="prefetch" href="/assets/js/140.a54c064d.js"><link rel="prefetch" href="/assets/js/141.0de2ed45.js"><link rel="prefetch" href="/assets/js/142.61ea0663.js"><link rel="prefetch" href="/assets/js/143.24d35022.js"><link rel="prefetch" href="/assets/js/144.196d7653.js"><link rel="prefetch" href="/assets/js/145.223f0fcf.js"><link rel="prefetch" href="/assets/js/146.a09f8d1b.js"><link rel="prefetch" href="/assets/js/147.62d69c7c.js"><link rel="prefetch" href="/assets/js/148.d46a05d0.js"><link rel="prefetch" href="/assets/js/149.467faf3d.js"><link rel="prefetch" href="/assets/js/15.758ee11b.js"><link rel="prefetch" href="/assets/js/150.0443932e.js"><link rel="prefetch" href="/assets/js/151.0879c074.js"><link rel="prefetch" href="/assets/js/152.4d08f8a9.js"><link rel="prefetch" href="/assets/js/153.ce46c4fa.js"><link rel="prefetch" href="/assets/js/154.fd65dd72.js"><link rel="prefetch" href="/assets/js/155.b975728f.js"><link rel="prefetch" href="/assets/js/156.61194924.js"><link rel="prefetch" href="/assets/js/157.97e4f54e.js"><link rel="prefetch" href="/assets/js/158.5290a2f0.js"><link rel="prefetch" href="/assets/js/159.3613e64b.js"><link rel="prefetch" href="/assets/js/16.2569be64.js"><link rel="prefetch" href="/assets/js/160.87d90e6b.js"><link rel="prefetch" href="/assets/js/161.a2a67f25.js"><link rel="prefetch" href="/assets/js/162.b51ccce1.js"><link rel="prefetch" href="/assets/js/163.85d33d23.js"><link rel="prefetch" href="/assets/js/164.5504b77f.js"><link rel="prefetch" href="/assets/js/165.be283131.js"><link rel="prefetch" href="/assets/js/166.8d0352c5.js"><link rel="prefetch" href="/assets/js/167.89c23a71.js"><link rel="prefetch" href="/assets/js/168.aa736b2c.js"><link rel="prefetch" href="/assets/js/169.296ccc1d.js"><link rel="prefetch" href="/assets/js/17.5b873df7.js"><link rel="prefetch" href="/assets/js/170.c706da49.js"><link rel="prefetch" href="/assets/js/171.6f79aeb1.js"><link rel="prefetch" href="/assets/js/172.ddcae302.js"><link rel="prefetch" href="/assets/js/173.f308eb43.js"><link rel="prefetch" href="/assets/js/174.b5ece966.js"><link rel="prefetch" href="/assets/js/175.538e3125.js"><link rel="prefetch" href="/assets/js/176.d54091dd.js"><link rel="prefetch" href="/assets/js/177.2ee0aa3d.js"><link rel="prefetch" href="/assets/js/178.667b3c59.js"><link rel="prefetch" href="/assets/js/179.07595c3e.js"><link rel="prefetch" href="/assets/js/18.4c170722.js"><link rel="prefetch" href="/assets/js/180.300e0b70.js"><link rel="prefetch" href="/assets/js/181.89473dcd.js"><link rel="prefetch" href="/assets/js/182.ea6036d1.js"><link rel="prefetch" href="/assets/js/183.647f8d55.js"><link rel="prefetch" href="/assets/js/184.2e79dd55.js"><link rel="prefetch" href="/assets/js/185.bf4d6269.js"><link rel="prefetch" href="/assets/js/186.7a7ceaa7.js"><link rel="prefetch" href="/assets/js/187.09bb0f21.js"><link rel="prefetch" href="/assets/js/188.3604ce73.js"><link rel="prefetch" href="/assets/js/189.49b47b33.js"><link rel="prefetch" href="/assets/js/19.a45744ea.js"><link rel="prefetch" href="/assets/js/190.88e59ff4.js"><link rel="prefetch" href="/assets/js/191.a4b3e5c7.js"><link rel="prefetch" href="/assets/js/192.7527e6ed.js"><link rel="prefetch" href="/assets/js/193.c44a652d.js"><link rel="prefetch" href="/assets/js/194.6aaca2ce.js"><link rel="prefetch" href="/assets/js/195.64837df2.js"><link rel="prefetch" href="/assets/js/196.e1bd3d69.js"><link rel="prefetch" href="/assets/js/197.2b01de81.js"><link rel="prefetch" href="/assets/js/198.d1496fd2.js"><link rel="prefetch" href="/assets/js/199.27ab1442.js"><link rel="prefetch" href="/assets/js/20.4cb27e25.js"><link rel="prefetch" href="/assets/js/200.996d49f4.js"><link rel="prefetch" href="/assets/js/201.b71a4422.js"><link rel="prefetch" href="/assets/js/202.0ea49eaa.js"><link rel="prefetch" href="/assets/js/203.8ebb1f77.js"><link rel="prefetch" href="/assets/js/204.c8d10533.js"><link rel="prefetch" href="/assets/js/205.0b8c4d0d.js"><link rel="prefetch" href="/assets/js/206.cce9bcce.js"><link rel="prefetch" href="/assets/js/207.8130e9ba.js"><link rel="prefetch" href="/assets/js/208.871753be.js"><link rel="prefetch" href="/assets/js/209.757eda19.js"><link rel="prefetch" href="/assets/js/21.445690e6.js"><link rel="prefetch" href="/assets/js/210.983cae1d.js"><link rel="prefetch" href="/assets/js/211.8e4ddaf8.js"><link rel="prefetch" href="/assets/js/212.6412fc61.js"><link rel="prefetch" href="/assets/js/213.656a6a73.js"><link rel="prefetch" href="/assets/js/214.befcd199.js"><link rel="prefetch" href="/assets/js/215.2c292e81.js"><link rel="prefetch" href="/assets/js/216.78cc7e8b.js"><link rel="prefetch" href="/assets/js/217.4fa8b1da.js"><link rel="prefetch" href="/assets/js/218.4c8cce7c.js"><link rel="prefetch" href="/assets/js/219.d041d013.js"><link rel="prefetch" href="/assets/js/22.bc7c4cdb.js"><link rel="prefetch" href="/assets/js/220.10a9ed88.js"><link rel="prefetch" href="/assets/js/221.bc25f391.js"><link rel="prefetch" href="/assets/js/222.dfdd15b7.js"><link rel="prefetch" href="/assets/js/223.1afa90d8.js"><link rel="prefetch" href="/assets/js/224.69bb037f.js"><link rel="prefetch" href="/assets/js/225.94590311.js"><link rel="prefetch" href="/assets/js/226.d1818961.js"><link rel="prefetch" href="/assets/js/227.2a969459.js"><link rel="prefetch" href="/assets/js/228.e3f5706b.js"><link rel="prefetch" href="/assets/js/229.0e6df830.js"><link rel="prefetch" href="/assets/js/23.b7994ecf.js"><link rel="prefetch" href="/assets/js/230.6bc93aa6.js"><link rel="prefetch" href="/assets/js/231.9b7cc0ec.js"><link rel="prefetch" href="/assets/js/232.80b7488d.js"><link rel="prefetch" href="/assets/js/233.302790de.js"><link rel="prefetch" href="/assets/js/234.68b70723.js"><link rel="prefetch" href="/assets/js/235.1b3c3110.js"><link rel="prefetch" href="/assets/js/236.e536b7bb.js"><link rel="prefetch" href="/assets/js/237.cca351a3.js"><link rel="prefetch" href="/assets/js/238.f4d0edb0.js"><link rel="prefetch" href="/assets/js/239.4f57e73d.js"><link rel="prefetch" href="/assets/js/24.26e26a07.js"><link rel="prefetch" href="/assets/js/240.1e76f670.js"><link rel="prefetch" href="/assets/js/241.8795d427.js"><link rel="prefetch" href="/assets/js/242.c72205cb.js"><link rel="prefetch" href="/assets/js/243.d7105431.js"><link rel="prefetch" href="/assets/js/244.361b2ea5.js"><link rel="prefetch" href="/assets/js/245.055fa0a3.js"><link rel="prefetch" href="/assets/js/246.0dee7b05.js"><link rel="prefetch" href="/assets/js/247.c13fc7d7.js"><link rel="prefetch" href="/assets/js/248.4e481dba.js"><link rel="prefetch" href="/assets/js/25.626c2c33.js"><link rel="prefetch" href="/assets/js/26.c4aa6beb.js"><link rel="prefetch" href="/assets/js/27.b1a828b7.js"><link rel="prefetch" href="/assets/js/28.f9133ade.js"><link rel="prefetch" href="/assets/js/29.54e09df1.js"><link rel="prefetch" href="/assets/js/3.4db2e19a.js"><link rel="prefetch" href="/assets/js/30.d2654359.js"><link rel="prefetch" href="/assets/js/31.c57cf20e.js"><link rel="prefetch" href="/assets/js/32.ed5593a9.js"><link rel="prefetch" href="/assets/js/33.05f050d1.js"><link rel="prefetch" href="/assets/js/34.6d7f5b2f.js"><link rel="prefetch" href="/assets/js/35.67cc577c.js"><link rel="prefetch" href="/assets/js/36.0bbc204a.js"><link rel="prefetch" href="/assets/js/37.8ac35368.js"><link rel="prefetch" href="/assets/js/38.50bd8dba.js"><link rel="prefetch" href="/assets/js/39.38b783ce.js"><link rel="prefetch" href="/assets/js/4.66c035fd.js"><link rel="prefetch" href="/assets/js/40.cd3ee2ff.js"><link rel="prefetch" href="/assets/js/41.f4bec9a4.js"><link rel="prefetch" href="/assets/js/42.27fa7fec.js"><link rel="prefetch" href="/assets/js/43.2af4a015.js"><link rel="prefetch" href="/assets/js/44.8e48aaf4.js"><link rel="prefetch" href="/assets/js/45.d41c0319.js"><link rel="prefetch" href="/assets/js/46.de5cb880.js"><link rel="prefetch" href="/assets/js/47.cc7c8048.js"><link rel="prefetch" href="/assets/js/48.22c69558.js"><link rel="prefetch" href="/assets/js/49.cdd62276.js"><link rel="prefetch" href="/assets/js/5.632744e8.js"><link rel="prefetch" href="/assets/js/50.a7eebe42.js"><link rel="prefetch" href="/assets/js/51.a447aa90.js"><link rel="prefetch" href="/assets/js/52.c0f076a5.js"><link rel="prefetch" href="/assets/js/53.3564c5b0.js"><link rel="prefetch" href="/assets/js/54.c5c6e6be.js"><link rel="prefetch" href="/assets/js/55.0fcb916b.js"><link rel="prefetch" href="/assets/js/56.2812bd7d.js"><link rel="prefetch" href="/assets/js/57.4f95d22a.js"><link rel="prefetch" href="/assets/js/58.d9baba05.js"><link rel="prefetch" href="/assets/js/59.371bd0d7.js"><link rel="prefetch" href="/assets/js/6.85f26be6.js"><link rel="prefetch" href="/assets/js/60.a715876a.js"><link rel="prefetch" href="/assets/js/61.6b1a782b.js"><link rel="prefetch" href="/assets/js/62.11484b5e.js"><link rel="prefetch" href="/assets/js/63.7b92573e.js"><link rel="prefetch" href="/assets/js/64.98aee69e.js"><link rel="prefetch" href="/assets/js/65.aa40eacd.js"><link rel="prefetch" href="/assets/js/66.67703170.js"><link rel="prefetch" href="/assets/js/67.392b86af.js"><link rel="prefetch" href="/assets/js/68.9610b8e9.js"><link rel="prefetch" href="/assets/js/69.6277fc7a.js"><link rel="prefetch" href="/assets/js/7.b775b056.js"><link rel="prefetch" href="/assets/js/70.b47adb04.js"><link rel="prefetch" href="/assets/js/71.0051199b.js"><link rel="prefetch" href="/assets/js/72.fa131834.js"><link rel="prefetch" href="/assets/js/73.fd8d275f.js"><link rel="prefetch" href="/assets/js/74.82095aed.js"><link rel="prefetch" href="/assets/js/75.41fad4ea.js"><link rel="prefetch" href="/assets/js/76.36bb1714.js"><link rel="prefetch" href="/assets/js/77.83c409c1.js"><link rel="prefetch" href="/assets/js/78.ca197ebf.js"><link rel="prefetch" href="/assets/js/79.9f0de524.js"><link rel="prefetch" href="/assets/js/80.7dd0f8a1.js"><link rel="prefetch" href="/assets/js/81.a5d44424.js"><link rel="prefetch" href="/assets/js/82.03d59f96.js"><link rel="prefetch" href="/assets/js/83.43da9399.js"><link rel="prefetch" href="/assets/js/84.e9ab171d.js"><link rel="prefetch" href="/assets/js/85.523fe07f.js"><link rel="prefetch" href="/assets/js/86.90aac9c6.js"><link rel="prefetch" href="/assets/js/87.1af6082d.js"><link rel="prefetch" href="/assets/js/88.3d7d10f0.js"><link rel="prefetch" href="/assets/js/89.69f4fbaf.js"><link rel="prefetch" href="/assets/js/90.30407e67.js"><link rel="prefetch" href="/assets/js/91.94355f67.js"><link rel="prefetch" href="/assets/js/92.8247a2fb.js"><link rel="prefetch" href="/assets/js/93.245ee436.js"><link rel="prefetch" href="/assets/js/94.a212b15e.js"><link rel="prefetch" href="/assets/js/95.dec85448.js"><link rel="prefetch" href="/assets/js/96.77ebb7ae.js"><link rel="prefetch" href="/assets/js/97.0a615ee3.js"><link rel="prefetch" href="/assets/js/99.270c2389.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.b7a3ab4f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8c53e149.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å‘¨å²çš„ä¸ªäººåšå®¢</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/java SE/guide.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/é¡¹ç›®æ€»ç»“/Mybatisä½¿ç”¨/Mybatisåˆ†é¡µå®ç°.html" class="nav-link">
  é¡¹ç›®æ€»ç»“
</a></div><div class="nav-item"><a href="/Javaé¢è¯•é¢˜/JavaåŸºç¡€é¢è¯•é¢˜/==å’Œequalsçš„åŒºåˆ«.html" class="nav-link">
  Javaé¢è¯•é¢˜
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="äº†è§£æ›´å¤š" class="dropdown-title"><span class="title">äº†è§£æ›´å¤š</span> <span class="arrow down"></span></button> <button type="button" aria-label="äº†è§£æ›´å¤š" class="mobile-dropdown-title"><span class="title">äº†è§£æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/demo223" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/zhouqi-5zipq" target="_blank" rel="noopener noreferrer" class="nav-link external">
  è¯­é›€
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/java SE/guide.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/é¡¹ç›®æ€»ç»“/Mybatisä½¿ç”¨/Mybatisåˆ†é¡µå®ç°.html" class="nav-link">
  é¡¹ç›®æ€»ç»“
</a></div><div class="nav-item"><a href="/Javaé¢è¯•é¢˜/JavaåŸºç¡€é¢è¯•é¢˜/==å’Œequalsçš„åŒºåˆ«.html" class="nav-link">
  Javaé¢è¯•é¢˜
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="äº†è§£æ›´å¤š" class="dropdown-title"><span class="title">äº†è§£æ›´å¤š</span> <span class="arrow down"></span></button> <button type="button" aria-label="äº†è§£æ›´å¤š" class="mobile-dropdown-title"><span class="title">äº†è§£æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/demo223" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/zhouqi-5zipq" target="_blank" rel="noopener noreferrer" class="nav-link external">
  è¯­é›€
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/java SE/guide" class="sidebar-heading clickable"><span>java SE</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>java web</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å¾®æœåŠ¡</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mybatis-Plus</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å¸¸ç”¨å·¥å…·ç±»</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javaé¢è¯•é¢˜</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é¡¹ç›®æ€»ç»“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/SpringBootæ–‡æ¡£/01-Spring-IOC" class="sidebar-heading clickable open"><span>SpringBootæ–‡æ¡£</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/SpringBootæ–‡æ¡£/01-Spring-IOC.html" class="sidebar-link">01-Spring-IOC</a></li><li><a href="/SpringBootæ–‡æ¡£/02-Spring-AOP.html" class="active sidebar-link">02-Spring-AOP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/SpringBootæ–‡æ¡£/02-Spring-AOP.html#_1-aop" class="sidebar-link">1 AOP</a></li><li class="sidebar-sub-header"><a href="/SpringBootæ–‡æ¡£/02-Spring-AOP.html#_2-yaml" class="sidebar-link">2. yaml</a></li><li class="sidebar-sub-header"><a href="/SpringBootæ–‡æ¡£/02-Spring-AOP.html#ä»Šæ—¥æ³¨è§£" class="sidebar-link">ä»Šæ—¥æ³¨è§£</a></li></ul></li><li><a href="/SpringBootæ–‡æ¡£/03-Spring-äº‹åŠ¡.html" class="sidebar-link">03-Spring-äº‹åŠ¡</a></li><li><a href="/SpringBootæ–‡æ¡£/08-MyBatisPlus.html" class="sidebar-link">08-MyBatisPlus</a></li><li><a href="/SpringBootæ–‡æ¡£/SpringBootè‡ªåŠ¨é…ç½®åŸç†.html" class="sidebar-link">SpringBootè‡ªåŠ¨é…ç½®åŸç†</a></li><li><a href="/SpringBootæ–‡æ¡£/Mavené«˜çº§.html" class="sidebar-link">Mavené«˜çº§</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/å¾®æœåŠ¡æ–‡æ¡£/SpringCloudä»‹ç»" class="sidebar-heading clickable"><span>å¾®æœåŠ¡æ–‡æ¡£</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-aop"><a href="#_1-aop" class="header-anchor">#</a> 1 AOP</h2> <p>ä½œç”¨ï¼šå¯¹æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚</p> <h3 id="_1-1-aop-å…¥é—¨"><a href="#_1-1-aop-å…¥é—¨" class="header-anchor">#</a> 1.1 AOP å…¥é—¨</h3> <h4 id="_1-æ—¥å¿—é—®é¢˜"><a href="#_1-æ—¥å¿—é—®é¢˜" class="header-anchor">#</a> 1) æ—¥å¿—é—®é¢˜</h4> <p>è¦å¯¹ä¸šåŠ¡æ–¹æ³•çš„æ‰§è¡Œæ—¶é—´è¿›è¡Œæ—¥å¿—è®°å½•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PersonService</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Person</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">PersonService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">PersonServiceImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;save({})&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;cost time: {} ns&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;update({})&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;cost time: {} ns&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>å‘ç°æœ‰å¾ˆå¤šé‡å¤ä»£ç ï¼Œå¦‚æœéœ€æ±‚æœ‰å˜æ›´ï¼Œæ”¹åŠ¨å¾ˆå¤§</p> <h4 id="_2-è§£å†³æ€è·¯"><a href="#_2-è§£å†³æ€è·¯" class="header-anchor">#</a> 2) è§£å†³æ€è·¯</h4> <p>AOP å³ aspect oriented programmingï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†é‡å¤çš„é€»è¾‘å‰¥ç¦»å‡ºæ¥ï¼ˆç§°ä¸ºé€šçŸ¥ï¼‰ï¼Œä»¥è¾¾åˆ°å¢å¼ºæ‰©å±•æ€§çš„ç›®çš„</p> <p>ç›®æ ‡</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">PersonService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">PersonServiceImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;save({})&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;update({})&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>é€šçŸ¥-å‰å¢å¼º</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é€šçŸ¥-åå¢å¼º</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;cost time: {} ns&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_3-æ¦‚å¿µå¼•å…¥"><a href="#_3-æ¦‚å¿µå¼•å…¥" class="header-anchor">#</a> 3) æ¦‚å¿µå¼•å…¥</h4> <p>é—®é¢˜ç¤ºæ„å›¾</p> <div class="language-mermaid line-numbers-mode"><pre class="language-mermaid"><code><span class="token keyword">graph</span> TD

t<span class="token text string">(PersonServiceImpl)</span>
t1a<span class="token text string">(&quot;å‰&quot;)</span>
t1b<span class="token text string">(&quot;save()&quot;)</span>
t1c<span class="token text string">(&quot;å&quot;)</span>

t2a<span class="token text string">(&quot;å‰&quot;)</span>
t2b<span class="token text string">(&quot;update()&quot;)</span>
t2c<span class="token text string">(&quot;å&quot;)</span>

t3a<span class="token text string">(&quot;å‰&quot;)</span>
t3b<span class="token text string">(&quot;delete()&quot;)</span>
t3c<span class="token text string">(&quot;å&quot;)</span>


<span class="token keyword">subgraph</span> <span class="token string">&quot;å­˜åœ¨é—®é¢˜&quot;</span>
t<span class="token arrow operator">---</span>t1a<span class="token arrow operator">---</span>t1b<span class="token arrow operator">---</span>t1c

t<span class="token arrow operator">---</span>t2a<span class="token arrow operator">---</span>t2b<span class="token arrow operator">---</span>t2c

t<span class="token arrow operator">---</span>t3a<span class="token arrow operator">---</span>t3b<span class="token arrow operator">---</span>t3c
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>è§£å†³ç¤ºæ„å›¾
å…ˆæŠŠé‡å¤çš„é€»è¾‘æŠ½å–å‡ºå»ï¼Œç§°ä¸ºé€šçŸ¥</p> <div class="language-mermaid line-numbers-mode"><pre class="language-mermaid"><code><span class="token keyword">graph</span> TD

t<span class="token text string">(PersonServiceImpl)</span>
t1a<span class="token text string">(&quot;_&quot;)</span>
t1b<span class="token text string">(&quot;save()&quot;)</span>
t1c<span class="token text string">(&quot;_&quot;)</span>

t2a<span class="token text string">(&quot;_&quot;)</span>
t2b<span class="token text string">(&quot;update()&quot;)</span>
t2c<span class="token text string">(&quot;_&quot;)</span>

t3a<span class="token text string">(&quot;_&quot;)</span>
t3b<span class="token text string">(&quot;delete()&quot;)</span>
t3c<span class="token text string">(&quot;_&quot;)</span>

a<span class="token text string">(é€šçŸ¥)</span>

<span class="token keyword">subgraph</span> <span class="token string">&quot;ç›®æ ‡&quot;</span>
t<span class="token arrow operator">---</span>t1a<span class="token arrow operator">---</span>t1b<span class="token arrow operator">---</span>t1c

t<span class="token arrow operator">---</span>t2a<span class="token arrow operator">---</span>t2b<span class="token arrow operator">---</span>t2c

t<span class="token arrow operator">---</span>t3a<span class="token arrow operator">---</span>t3b<span class="token arrow operator">---</span>t3c
<span class="token keyword">end</span>

a1<span class="token text string">(&quot;å‰&quot;)</span>
a2<span class="token text string">(&quot;_&quot;)</span>
a3<span class="token text string">(&quot;å&quot;)</span>
a<span class="token arrow operator">---</span>a1<span class="token arrow operator">---</span>a2<span class="token arrow operator">---</span>a3

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>ç”±ä»£ç†æŠŠå®ƒä»¬åœ¨è¿è¡Œæ—¶ç»“åˆèµ·æ¥</p> <div class="language-mermaid line-numbers-mode"><pre class="language-mermaid"><code><span class="token keyword">graph</span> TD

t<span class="token text string">(Proxy)</span>
t1i<span class="token text string">(&quot;ä»£ç†save()&quot;)</span>
t1a<span class="token text string">(&quot;_&quot;)</span>
t1b<span class="token text string">(&quot;ç›®æ ‡save()&quot;)</span>
t1c<span class="token text string">(&quot;_&quot;)</span>

t2i<span class="token text string">(&quot;ä»£ç†update()&quot;)</span>
t2a<span class="token text string">(&quot;_&quot;)</span>
t2b<span class="token text string">(&quot;ç›®æ ‡update()&quot;)</span>
t2c<span class="token text string">(&quot;_&quot;)</span>

t3i<span class="token text string">(&quot;ä»£ç†delete()&quot;)</span>
t3a<span class="token text string">(&quot;_&quot;)</span>
t3b<span class="token text string">(&quot;ç›®æ ‡delete()&quot;)</span>
t3c<span class="token text string">(&quot;_&quot;)</span>

<span class="token keyword">subgraph</span> <span class="token string">&quot;ä»£ç†&quot;</span>
t<span class="token arrow operator">---</span>t1i<span class="token arrow operator">---</span>t1a<span class="token arrow operator">---</span>t1b<span class="token arrow operator">---</span>t1c

t<span class="token arrow operator">---</span>t2i<span class="token arrow operator">---</span>t2a<span class="token arrow operator">---</span>t2b<span class="token arrow operator">---</span>t2c

t<span class="token arrow operator">---</span>t3i<span class="token arrow operator">---</span>t3a<span class="token arrow operator">---</span>t3b<span class="token arrow operator">---</span>t3c
<span class="token keyword">end</span>

a<span class="token text string">(é€šçŸ¥)</span>
a0<span class="token text string">(&quot;_&quot;)</span>
a1<span class="token text string">(&quot;å‰&quot;)</span>
a2<span class="token text string">(&quot;_&quot;)</span>
a3<span class="token text string">(&quot;å&quot;)</span>
a<span class="token arrow operator">---</span>a0<span class="token arrow operator">---</span>a1<span class="token arrow operator">---</span>a2<span class="token arrow operator">---</span>a3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>æŸæ¬¡çš„è°ƒç”¨æµç¨‹</p> <div class="language-mermaid line-numbers-mode"><pre class="language-mermaid"><code><span class="token keyword">graph</span> LR

p<span class="token text string">(&quot;ä»£ç†save()&quot;)</span>
t1<span class="token text string">(&quot;ç›®æ ‡save()&quot;)</span>

a1<span class="token text string">(é€šçŸ¥-å‰)</span>
a2<span class="token text string">(é€šçŸ¥-å)</span>

<span class="token keyword">subgraph</span> <span class="token string">&quot;è°ƒç”¨&quot;</span>
p<span class="token arrow operator">--&gt;</span>a1<span class="token arrow operator">--&gt;</span>t1<span class="token arrow operator">--&gt;</span>a2
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="é‡è¦æ¦‚å¿µ"><a href="#é‡è¦æ¦‚å¿µ" class="header-anchor">#</a> ğŸš©é‡è¦æ¦‚å¿µ</h4> <p>å…¶ä¸­</p> <ul><li>ç›®æ ‡ - è‹±æ–‡ targetï¼Œéœ€è¦è¢«å¢å¼ºçš„å¯¹è±¡</li> <li>é€šçŸ¥ - è‹±æ–‡ adviceï¼Œé‚£äº›é‡å¤çš„é€»è¾‘ï¼Œå¯ä»¥ç†è§£ä¸ºå¢å¼º</li> <li>ä»£ç† - è‹±æ–‡ proxyï¼Œå…‰æœ‰ç›®æ ‡å’Œé€šçŸ¥è¿˜ä¸å¤Ÿï¼Œéœ€è¦ä»£ç†æ¥ç»“åˆäºŒè€…</li> <li>è¿æ¥ç‚¹ - è‹±æ–‡ joinpointï¼Œåœ¨ Spring ä¸­ç‰¹æŒ‡<strong>æ–¹æ³•æ‰§è¡Œ</strong>ï¼ˆæš—å«æ–¹æ³•æ‰§è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ï¼‰</li> <li>åˆ‡ç‚¹ - è‹±æ–‡ pointcutï¼ŒåŒ¹é…è¿æ¥ç‚¹çš„æ¡ä»¶ï¼Œé€šçŸ¥ä»…ä¼šåœ¨åŒ¹é…åˆ‡ç‚¹çš„æ–¹æ³•æ‰§è¡Œæ—¶è¢«åº”ç”¨</li> <li>åˆ‡é¢ - è‹±æ–‡ aspectï¼Œé€šçŸ¥å’Œåˆ‡ç‚¹åˆåœ¨ä¸€èµ·ï¼Œç§°ä¸ºåˆ‡é¢</li></ul> <p>ä»£ç†ç±»ä¼ªä»£ç </p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonServiceProxy</span> <span class="token keyword">implements</span> <span class="token class-name">PersonService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ‰§è¡Œé€šçŸ¥æ–¹æ³•åŠç›®æ ‡æ–¹æ³•</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ‰§è¡Œé€šçŸ¥æ–¹æ³•åŠç›®æ ‡æ–¹æ³•</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p><em><strong>æ€è€ƒ</strong></em></p> <p>ä»£ç†ä¸ºä½•ä¹Ÿè¦å®ç° PersonService æ¥å£ï¼Ÿ</p> <ul><li>å› ä¸ºè¦è®©ä½¿ç”¨è€…æ„ŸçŸ¥ä¸åˆ°è‡ªå·±ä½¿ç”¨äº†ä»£ç†ï¼ŒåŸæœ‰çš„è°ƒç”¨æ— éœ€æ›´æ”¹ï¼ˆå›¾1 æ‰€ç¤ºï¼‰</li></ul> <p>å¦‚æœç›®æ ‡æ²¡æœ‰å®ç°æ¥å£ï¼Œèƒ½å¦ä½¿ç”¨ä»£ç†</p> <ul><li>å¯ä»¥ã€‚ä½¿ç”¨ç›®æ ‡çš„å­ç±»ä½œä¸ºä»£ç†ï¼ˆå›¾2 æ‰€ç¤ºï¼‰</li></ul></blockquote> <p>å›¾1ï¼Œè‹¥ç›®æ ‡ PersonServiceImpl å®ç°äº† PersonService æ¥å£ï¼Œé‚£ä¹ˆé‡‡ç”¨ä¸ä¹‹å¹³çº§ã€åŒæ ·å®ç°äº† PersonService æ¥å£çš„ç±»ä½œä¸ºä»£ç†</p> <div class="language-mermaid line-numbers-mode"><pre class="language-mermaid"><code><span class="token keyword">classDiagram</span>
      PersonService <span class="token arrow operator">&lt;|--</span> PersonServiceImpl
      PersonService <span class="token arrow operator">&lt;|--</span> PersonServiceProxy
      <span class="token keyword">class</span> PersonService<span class="token punctuation">{</span>
      	<span class="token annotation important">&lt;&lt;interface&gt;&gt;</span>
      <span class="token punctuation">}</span>
      
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å›¾2ï¼Œè‹¥ç›®æ ‡ PersonService ä¸æ˜¯æ¥å£ï¼Œå·²ç»æ˜¯å…·ä½“ç±»ï¼Œé‡‡ç”¨å®ƒçš„å­ç±»ä½œä¸ºä»£ç†</p> <div class="language-mermaid line-numbers-mode"><pre class="language-mermaid"><code><span class="token keyword">classDiagram</span>
      PersonService <span class="token arrow operator">&lt;|--</span> PersonServiceProxy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_4-æ—¥å¿—é—®é¢˜è§£å†³"><a href="#_4-æ—¥å¿—é—®é¢˜è§£å†³" class="header-anchor">#</a> 4) æ—¥å¿—é—®é¢˜è§£å†³</h4> <p>æ­¥éª¤</p> <ol><li>å¼•å…¥ aop ç›¸å…³åæ ‡ - ä»£ç ç‰‡æ®µ1</li> <li>ç¼–å†™åˆ‡é¢ç±» - ä»£ç ç‰‡æ®µ2
<ol><li>å†™åˆ‡é¢</li> <li>å†™é€šçŸ¥</li> <li>è°ƒç›®æ ‡</li> <li>å®šåˆ‡ç‚¹</li></ol></li></ol> <p>ä»£ç ç‰‡æ®µ1</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.aspectj<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aspectjweaver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä»£ç ç‰‡æ®µ2</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span> <span class="token comment">// å†™åˆ‡é¢. åˆ‡é¢ç±»ä¹Ÿéœ€è¦é…åˆç»„ä»¶æ‰«æè¢« Spring ç®¡ç†èµ·æ¥</span>
<span class="token annotation punctuation">@Aspect</span> <span class="token comment">// å†™åˆ‡é¢. æ ‡æ³¨æ­¤ç±»æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect1</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// å†™é€šçŸ¥. æ ‡æ³¨ @Around æ³¨è§£çš„æ–¹æ³•ç§°ä¸ºé€šçŸ¥æ–¹æ³•ï¼Œå†…å«å¢å¼ºé€»è¾‘</span>
	<span class="token comment">// å®šåˆ‡ç‚¹. æœ€ååœ¨ @Around å†…ä¹¦å†™åˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œç¡®å®šå“ªäº›ç›®æ ‡æ–¹æ³•éœ€è¦å¢å¼º</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.impl.PersonServiceImpl.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// è°ƒç›®æ ‡. pjp.proceed() å³è¡¨ç¤ºè°ƒç”¨ç›®æ ‡æ–¹æ³•</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;cost time: {} ns&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>æµ‹è¯•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Aop1Tests</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">PersonService</span> personService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        personService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;æå››&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        personService<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;æå°å››&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        personService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Person</span> person <span class="token operator">=</span> personService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> personService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> personService<span class="token punctuation">.</span><span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>éƒ¨åˆ†è¿è¡Œç»“æœ</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>...
15:55:40  INFO PersonServiceImpl : findByPage(1, 5)
15:55:40  INFO Aspect1           : cost time: 322800 ns
15:55:40  INFO PersonServiceImpl : save(Person{id=3, name='æå››'})
15:55:40  INFO Aspect1           : cost time: 370600 ns
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_1-2-aop-è¿›é˜¶"><a href="#_1-2-aop-è¿›é˜¶" class="header-anchor">#</a> 1.2 AOP è¿›é˜¶</h3> <h4 id="_1-åˆ‡ç‚¹è¡¨è¾¾å¼"><a href="#_1-åˆ‡ç‚¹è¡¨è¾¾å¼" class="header-anchor">#</a> 1) åˆ‡ç‚¹è¡¨è¾¾å¼</h4> <p>åˆ‡ç‚¹è¡¨è¾¾å¼ç”¨æ¥åŒ¹é…ã€å“ªäº›ã€‘ç›®æ ‡æ–¹æ³•éœ€è¦åº”ç”¨é€šçŸ¥ï¼Œå¸¸è§çš„åˆ‡ç‚¹è¡¨è¾¾å¼å¦‚ä¸‹</p> <ul><li><code>execution(è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°ç±»å‹))</code> <ul><li><code>*</code> å¯ä»¥é€šé…ä»»æ„è¿”å›å€¼ç±»å‹ã€åŒ…åã€ç±»åã€æ–¹æ³•åã€æˆ–ä»»æ„ç±»å‹çš„ä¸€ä¸ªå‚æ•°</li> <li><code>..</code> å¯ä»¥é€šé…ä»»æ„å±‚çº§çš„åŒ…ã€æˆ–ä»»æ„ç±»å‹ã€ä»»æ„ä¸ªæ•°çš„å‚æ•°</li></ul></li> <li><code>@annotation()</code> æ ¹æ®æ³¨è§£åŒ¹é…</li></ul> <p>æµ‹è¯•ä»£ç å‡ä¸€æ ·ï¼Œä»…ç²˜è´´ä¸€æ¬¡</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Aop5Tests</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">Service5</span> service5<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        service5<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;æå››&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        service5<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;æå°å››&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        service5<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Person</span> person <span class="token operator">=</span> service5<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> service5<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> service5<span class="token punctuation">.</span><span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h5 id="execution"><a href="#execution" class="header-anchor">#</a> execution()</h5> <p>å®ƒä¸»è¦æ ¹æ®æ–¹æ³•çš„è¿”å›å€¼ã€åŒ…åã€ç±»åã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°ç­‰ä¿¡æ¯æ¥åŒ¹é…ï¼Œè¯­æ³•ä¸º</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>execution(@æ³¨è§£? è®¿é—®ä¿®é¥°ç¬¦? è¿”å›å€¼ åŒ…å.ç±»å?.æ–¹æ³•å(æ–¹æ³•å‚æ•°) throws å¼‚å¸¸?)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å…¶ä¸­å¸¦ ? çš„è¡¨ç¤ºå¯ä»¥çœç•¥çš„éƒ¨åˆ†</p> <ul><li>æ³¨è§£å¯çœç•¥ï¼ˆæ²¡å•¥ç”¨ï¼‰</li> <li>è®¿é—®ä¿®é¥°ç¬¦å¯çœç•¥ï¼ˆæ²¡å•¥ç”¨ï¼Œä»…èƒ½åŒ¹é… publicã€protectedã€åŒ…çº§ï¼Œprivate ä¸èƒ½å¢å¼ºï¼‰</li> <li>åŒ…å.ç±»åå¯çœç•¥</li> <li>thorws å¼‚å¸¸å¯çœç•¥ï¼ˆæ³¨æ„æ˜¯æ–¹æ³•ä¸Šå£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ï¼Œä¸æ˜¯å®é™…æŠ›å‡ºçš„å¼‚å¸¸ï¼‰</li></ul> <p>ä¾‹1 <code>..</code> å‡ºç°åœ¨åŒ…éƒ¨åˆ†è¡¨ç¤ºä»»æ„å±‚çº§çš„åŒ…</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect5</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect5</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä¾‹1 .. å‡ºç°åœ¨åŒ…éƒ¨åˆ†è¡¨ç¤ºä»»æ„å±‚çº§çš„åŒ…</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1..Service5Impl.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pt1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;pt1()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ç»“æœï¼ˆæ‰€æœ‰æ–¹æ³•éƒ½è¢«å¢å¼ºäº†ï¼‰</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>16:37:49  INFO Aspect5           : before...
16:37:49  INFO Service5Impl      : delete(1)
16:37:49  INFO Aspect5           : before...
16:37:49  INFO Service5Impl      : findAll()
16:37:49  INFO Aspect5           : before...
16:37:49  INFO Service5Impl      : update(Person{id=3, name='æå°å››'})
16:37:49  INFO Aspect5           : before...
16:37:49  INFO Service5Impl      : findById(1)
16:37:49  INFO Aspect5           : before...
16:37:49  INFO Service5Impl      : findByPage(1, 5)
16:37:49  INFO Aspect5           : before...
16:37:49  INFO Service5Impl      : save(Person{id=3, name='æå››'})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ä¾‹2 åˆ‡ç‚¹åŠ åœ¨æ¥å£ä¸Š, ä¼šåŒ¹é…æ­¤æ¥å£çš„å®ç°ç±»</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect5</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect5</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä¾‹2 åˆ‡ç‚¹åŠ åœ¨æ¥å£ä¸Š, ä¼šåŒ¹é…æ­¤æ¥å£çš„å®ç°ç±»</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.Service5.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pt2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
	
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;pt2()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æµ‹è¯•ç»“æœåŒ ä¾‹1ï¼ˆæ‰€æœ‰æ–¹æ³•éƒ½è¢«å¢å¼ºäº†ï¼‰</p> <p>ä¾‹3 <code>*</code> å¯ä»¥é€šé…æ–¹æ³•åçš„ä¸€éƒ¨åˆ†</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect5</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect5</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä¾‹3 * å¯ä»¥é€šé…æ–¹æ³•åçš„ä¸€éƒ¨åˆ†</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.Service5.find*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pt3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
	
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;pt3()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>ç»“æœï¼ˆæ‰€æœ‰ find å¼€å¤´çš„æ–¹æ³•éƒ½è¢«å¢å¼ºäº†ï¼‰</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">16</span><span class="token operator">:</span><span class="token number">44</span><span class="token operator">:</span><span class="token number">41</span>  <span class="token constant">INFO</span> <span class="token class-name">Service5Impl</span>      <span class="token operator">:</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token number">16</span><span class="token operator">:</span><span class="token number">44</span><span class="token operator">:</span><span class="token number">41</span>  <span class="token constant">INFO</span> <span class="token class-name">Aspect5</span>           <span class="token operator">:</span> before<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">16</span><span class="token operator">:</span><span class="token number">44</span><span class="token operator">:</span><span class="token number">41</span>  <span class="token constant">INFO</span> <span class="token class-name">Service5Impl</span>      <span class="token operator">:</span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">16</span><span class="token operator">:</span><span class="token number">44</span><span class="token operator">:</span><span class="token number">41</span>  <span class="token constant">INFO</span> <span class="token class-name">Service5Impl</span>      <span class="token operator">:</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'æå°å››'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token number">16</span><span class="token operator">:</span><span class="token number">44</span><span class="token operator">:</span><span class="token number">41</span>  <span class="token constant">INFO</span> <span class="token class-name">Aspect5</span>           <span class="token operator">:</span> before<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">16</span><span class="token operator">:</span><span class="token number">44</span><span class="token operator">:</span><span class="token number">41</span>  <span class="token constant">INFO</span> <span class="token class-name">Service5Impl</span>      <span class="token operator">:</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token number">16</span><span class="token operator">:</span><span class="token number">44</span><span class="token operator">:</span><span class="token number">41</span>  <span class="token constant">INFO</span> <span class="token class-name">Aspect5</span>           <span class="token operator">:</span> before<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">16</span><span class="token operator">:</span><span class="token number">44</span><span class="token operator">:</span><span class="token number">41</span>  <span class="token constant">INFO</span> <span class="token class-name">Service5Impl</span>      <span class="token operator">:</span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token number">16</span><span class="token operator">:</span><span class="token number">44</span><span class="token operator">:</span><span class="token number">42</span>  <span class="token constant">INFO</span> <span class="token class-name">Service5Impl</span>      <span class="token operator">:</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'æå››'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¾‹4 <code>*</code> é€šé…å‚æ•°ï¼Œæ˜¯åŒ¹é…ã€ä»»æ„ç±»å‹çš„ä¸€ä¸ªå‚æ•°ã€‘</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect5</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect5</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä¾‹4 * é€šé…å‚æ•°, æ˜¯åŒ¹é…ã€ä»»æ„ç±»å‹çš„ä¸€ä¸ªå‚æ•°ã€‘</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.Service5.*(*))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pt4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
	
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;pt4()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ç»“æœï¼ˆsaveã€updateã€delete æ–¹æ³•éƒ½è¢«å¢å¼ºäº†ï¼Œå› ä¸ºå®ƒä»¬å‡æœ‰ä¸€ä¸ªå‚æ•°ï¼‰</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>16:47:56  INFO Aspect5           : before...
16:47:56  INFO Service5Impl      : delete(1)
16:47:56  INFO Service5Impl      : findAll()
16:47:56  INFO Aspect5           : before...
16:47:56  INFO Service5Impl      : update(Person{id=3, name='æå°å››'})
16:47:56  INFO Aspect5           : before...
16:47:56  INFO Service5Impl      : findById(1)
16:47:56  INFO Service5Impl      : findByPage(1, 5)
16:47:56  INFO Aspect5           : before...
16:47:56  INFO Service5Impl      : save(Person{id=3, name='æå››'})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="annotation"><a href="#annotation" class="header-anchor">#</a> @annotation</h5> <p>è‡ªå®šä¹‰ @Log æ³¨è§£</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Log</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;console&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ç›®æ ‡ç±»ä¸Šä¹ŸæŒ‘å‡ ä¸ªæ–¹æ³•åŠ ä¸Š @Log æ³¨è§£</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Service5Impl</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>demo1<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span>Service5</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Service5Impl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Log</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;save({})&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Log</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;update({})&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Log</span><span class="token punctuation">(</span><span class="token string">&quot;db&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;delete({})&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;findAll()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> people <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ç‹äº”&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;èµµå…­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> people<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;findByPage({}, {})&quot;</span><span class="token punctuation">,</span> page<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> people <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;ç‹äº”&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;èµµå…­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> people<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;findById({})&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> person<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>ä¾‹5ï¼ŒåŒ¹é…æœ‰æ²¡æœ‰ @Log æ³¨è§£</p> <p>åˆ‡é¢ç±»</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect5</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect5</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä¾‹5 åŒ¹é…ã€æ³¨è§£ä¿¡æ¯ã€‘</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;@annotation(com.itheima.demo1.service.Log)&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pt5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;pt5()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>ç»“æœï¼ˆåŠ äº† @Log æ³¨è§£çš„æ–¹æ³• saveã€updateã€delete å‡è¢«å¢å¼ºï¼‰</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>16:50:49  INFO Aspect5           : before...
16:50:49  INFO Service5Impl      : delete(1)
16:50:49  INFO Service5Impl      : findAll()
16:50:49  INFO Aspect5           : before...
16:50:49  INFO Service5Impl      : update(Person{id=3, name='æå°å››'})
16:50:49  INFO Service5Impl      : findById(1)
16:50:49  INFO Service5Impl      : findByPage(1, 5)
16:50:49  INFO Aspect5           : before...
16:50:49  INFO Service5Impl      : save(Person{id=3, name='æå››'})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¾‹6ï¼ŒåŒ¹é…å¹¶æ•è· @Log æ³¨è§£</p> <p>åˆ‡é¢ç±»</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect5</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect5</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä¾‹6 åŒ¹é…å¹¶æ•è·ã€æ³¨è§£ä¿¡æ¯ã€‘</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;@annotation(logObj)&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">Log</span> logObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before...{}&quot;</span><span class="token punctuation">,</span> logObj<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ç»“æœï¼ˆé¦–å…ˆï¼ŒåŠ äº† @Log æ³¨è§£çš„æ–¹æ³•æ‰ä¼šè¢«å¢å¼ºï¼›å…¶æ¬¡ï¼Œåœ¨é€šçŸ¥æ–¹æ³•å‚æ•°ä¸Šè·å¾—äº†å…·ä½“çš„ @Log æ³¨è§£å¯¹è±¡ï¼Œå¯ä»¥è·å–å®ƒé…ç½®çš„å€¼ï¼‰</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>16:55:29  INFO Aspect5           : before...db
16:55:29  INFO Service5Impl      : delete(1)
16:55:29  INFO Service5Impl      : findAll()
16:55:29  INFO Aspect5           : before...file
16:55:29  INFO Service5Impl      : update(Person{id=3, name='æå°å››'})
16:55:29  INFO Service5Impl      : findById(1)
16:55:29  INFO Service5Impl      : findByPage(1, 5)
16:55:29  INFO Aspect5           : before...console
16:55:29  INFO Service5Impl      : save(Person{id=3, name='æå››'})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¾‹7ï¼ŒåŒ¹é…å¹¶æ•è·ã€æ³¨è§£ä¿¡æ¯ã€‘åŠã€ç›®æ ‡æ–¹æ³•å‚æ•°ã€‘</p> <p>åˆ‡é¢ç±»</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect5</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect5</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;@annotation(logObj) &amp;&amp; args(person)&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">Log</span> logObj<span class="token punctuation">,</span> <span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before...{}, {}&quot;</span><span class="token punctuation">,</span> logObj<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ç»“æœï¼ˆç±»ä¼¼çš„ã€åœ¨ä¾‹2 çš„åŸºç¡€ä¸Šåˆåšäº†å‚æ•°ç±»å‹çš„åŒ¹é…å’Œæ•è·ï¼Œåªå¢å¼ºäº†å¸¦ Person å‚æ•°çš„ save å’Œ update æ–¹æ³•ï¼Œdelete æ–¹æ³•å¹¶æœªå¢å¼ºï¼‰</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>16:57:25  INFO Service5Impl      : delete(1)
16:57:25  INFO Service5Impl      : findAll()
16:57:25  INFO Aspect5           : before...@com.itheima.demo1.service.Log(value=file), Person{id=3, name='æå°å››'}
16:57:25  INFO Service5Impl      : update(Person{id=3, name='æå°å››'})
16:57:25  INFO Service5Impl      : findById(1)
16:57:25  INFO Service5Impl      : findByPage(1, 5)
16:57:25  INFO Aspect5           : before...@com.itheima.demo1.service.Log(value=console), Person{id=3, name='æå››'}
16:57:25  INFO Service5Impl      : save(Person{id=3, name='æå››'})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_2-é€šçŸ¥ç±»å‹"><a href="#_2-é€šçŸ¥ç±»å‹" class="header-anchor">#</a> 2) é€šçŸ¥ç±»å‹</h4> <p>ä¹‹å‰ä»‹ç»çš„æ˜¯ç¯ç»•é€šçŸ¥ï¼Œå®ƒæ˜¯åŠŸèƒ½æœ€ä¸ºå¼ºå¤§çš„é€šçŸ¥ï¼Œä½†é™¤æ­¤ä»¥å¤–è¿˜æœ‰å››ç§é€šçŸ¥ç±»å‹</p> <ul><li>@Before - æ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•å‰è¢«æ‰§è¡Œ</li> <li>@After - æ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•åè¢«æ‰§è¡Œï¼Œæ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸</li> <li>@AfterReturning - æ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•åè¢«æ‰§è¡Œï¼Œæœ‰å¼‚å¸¸ä¸ä¼šæ‰§è¡Œ</li> <li>@AfterThrowing - æ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•å‘ç”Ÿå¼‚å¸¸åæ‰§è¡Œ</li></ul> <p>å®ƒä»¬ä¸ @Around æœ‰ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå®ƒä»¬ä¸ç”¨è€ƒè™‘ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œï¼Œè€Œ @Around éœ€è¦è‡ªå·±è°ƒç”¨ ProceedingJoinPoint.proceed() æ¥è®©ç›®æ ‡æ–¹æ³•æ‰§è¡Œ</p> <h5 id="beforeå‰ç½®é€šçŸ¥"><a href="#beforeå‰ç½®é€šçŸ¥" class="header-anchor">#</a> @Beforeå‰ç½®é€šçŸ¥</h5> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect31</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect31</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.Service3.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="afterreturningåç½®é€šçŸ¥"><a href="#afterreturningåç½®é€šçŸ¥" class="header-anchor">#</a> @AfterReturningåç½®é€šçŸ¥</h5> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect33</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect33</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.Service3.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturning</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;after returning...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="afterthrowingå¼‚å¸¸é€šçŸ¥"><a href="#afterthrowingå¼‚å¸¸é€šçŸ¥" class="header-anchor">#</a> @AfterThrowingå¼‚å¸¸é€šçŸ¥</h5> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect34</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect34</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.Service3.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterThrowing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;after throwing...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="afteræœ€ç»ˆé€šçŸ¥"><a href="#afteræœ€ç»ˆé€šçŸ¥" class="header-anchor">#</a> @Afteræœ€ç»ˆé€šçŸ¥</h5> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect32</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect32</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.Service3.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;after...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ç›®æ ‡æ–¹æ³•æ‰§è¡Œæ²¡æœ‰å¼‚å¸¸æ—¶ï¼Œä»¥ä¸‹ä¸‰ä¸ªé€šçŸ¥ç”Ÿæ•ˆ</p> <p>@Beforeã€@Afterã€@AfterReturning</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>16:12:57  INFO Aspect31          : before...
16:12:57  INFO Service3Impl      : save(Person{id=3, name='æå››'})
16:12:57  INFO Aspect33          : after returning...
16:12:57  INFO Aspect32          : after...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‡ºç°å¼‚å¸¸æ—¶ï¼Œä»¥ä¸‹ä¸‰ä¸ªé€šçŸ¥ç”Ÿæ•ˆ
@Beforeã€@Afterã€@AfterThrowing</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>16:15:37  INFO Aspect31          : before...
16:15:37  INFO Service3Impl      : save(Person{id=3, name='æå››'})
16:15:37  INFO Aspect34          : after throwing...
16:15:37  INFO Aspect32          : after...

java.lang.ArithmeticException: / by zero
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_3-è¿æ¥ç‚¹"><a href="#_3-è¿æ¥ç‚¹" class="header-anchor">#</a> 3) è¿æ¥ç‚¹</h4> <p>è¿æ¥ç‚¹æ¦‚å¿µçš„åŸå§‹å®šä¹‰ä¸æ˜¯ç‰¹åˆ«å¥½ç†è§£</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>A point during the execution of a program, such as the execution of a method or the handling of an exception
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç®€å•ç†è§£å°±æ˜¯ <code>ç›®æ ‡æ–¹æ³•</code>ï¼Œåœ¨Spring ä¸­ç”¨ JoinPoint æŠ½è±¡äº†è¿æ¥ç‚¹ï¼Œç”¨å®ƒå¯ä»¥è·å¾—æ–¹æ³•æ‰§è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚æ–¹æ³•åã€æ–¹æ³•å‚æ•°ç±»å‹ã€æ–¹æ³•å®é™…å‚æ•°ç­‰ç­‰</p> <ul><li>å¯¹äº @Around é€šçŸ¥ï¼Œè·å–è¿æ¥ç‚¹ä¿¡æ¯åªèƒ½ä½¿ç”¨ ProceedingJoinPoint</li> <li>å¯¹äºå…¶ä»–å››ç§é€šçŸ¥ï¼Œè·å–è¿æ¥ç‚¹ä¿¡æ¯åªèƒ½ä½¿ç”¨ JoinPointï¼Œå®ƒæ˜¯ ProceedingJoinPoint çš„çˆ¶ç±»å‹</li></ul> <p>é‚£ä¹ˆå¦‚ä½•è·å–è¿™äº›ä¿¡æ¯å‘¢ï¼Ÿå‚è€ƒä¸‹é¢çš„ä»£ç </p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">printMethodInfo</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">MethodSignature</span> signature <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MethodSignature</span><span class="token punctuation">)</span> pjp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Method</span> method <span class="token operator">=</span> signature<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¿æ¥ç‚¹æ–¹æ³•:{}&quot;</span><span class="token punctuation">,</span> method<span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å‚æ•°ç±»å‹:{}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>signature<span class="token punctuation">.</span><span class="token function">getParameterTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å‚æ•°å:{}&quot;</span><span class="token punctuation">,</span>
             <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Parameter</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å‚æ•°å€¼:{}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>pjp<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_4-é€šçŸ¥é¡ºåº"><a href="#_4-é€šçŸ¥é¡ºåº" class="header-anchor">#</a> 4) é€šçŸ¥é¡ºåº</h4> <p>å½“æœ‰å¤šä¸ªåˆ‡é¢çš„åˆ‡ç‚¹éƒ½åŒ¹é…ç›®æ ‡æ—¶ï¼Œå¤šä¸ªé€šçŸ¥æ–¹æ³•éƒ½ä¼šè¢«æ‰§è¡Œã€‚ä¹‹å‰ä»‹ç»çš„ pjp.proceed() åœ¨æœ‰å¤šä¸ªé€šçŸ¥æ–¹æ³•åŒ¹é…æ—¶ï¼Œæ›´å‡†ç¡®çš„æè¿°åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p> <ul><li>å¦‚æœè¿˜æœ‰ä¸‹ä¸€ä¸ªé€šçŸ¥ï¼Œåˆ™è°ƒç”¨ä¸‹ä¸€ä¸ªé€šçŸ¥</li> <li>å¦‚æœæ²¡æœ‰ä¸‹ä¸€ä¸ªé€šçŸ¥ï¼Œåˆ™è°ƒç”¨ç›®æ ‡</li></ul> <p>é‚£ä¹ˆå®ƒä»¬çš„æ‰§è¡Œé¡ºåºæ˜¯æ€æ ·çš„å‘¢ï¼Ÿ</p> <ul><li>é»˜è®¤æŒ‰ç…§ bean çš„åç§°å­—æ¯æ’åº</li> <li>ç”¨ <code>@Order(æ•°å­—)</code> åŠ åœ¨åˆ‡é¢ç±»ä¸Šæ¥æ§åˆ¶é¡ºåº
<ul><li>ç›®æ ‡å‰çš„é€šçŸ¥æ–¹æ³•ï¼šæ•°å­—å°å…ˆæ‰§è¡Œ</li> <li>ç›®æ ‡åçš„é€šçŸ¥æ–¹æ³•ï¼šæ•°å­—å°åæ‰§è¡Œ</li></ul></li></ul> <p>ä¸‹é¢æ˜¯ä¸‰ä¸ªåˆ‡é¢ç±»ï¼Œéƒ½ä½¿ç”¨äº†ç¯ç»•é€šçŸ¥
åˆ‡é¢ç±»1</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect21</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect21</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.Service2.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;after...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>åˆ‡é¢ç±»2</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect22</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect22</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.Service2.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;after...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>åˆ‡é¢ç±»3</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect23</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect23</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.Service2.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;after...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ç›®æ ‡ç±»</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Service2Impl</span> <span class="token keyword">implements</span> <span class="token class-name">Service2</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Service2Impl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;save({})&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>æµ‹è¯•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Aop2Tests</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">Service2</span> service2<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        service2<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;æå››&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è¿è¡Œç»“æœ</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>16:02:35  INFO Aspect23          : before...
16:02:35  INFO Aspect22          : before...
16:02:35  INFO Aspect21          : before...
16:02:35  INFO Service2Impl      : save(Person{id=3, name='æå››'})
16:02:35  INFO Aspect21          : after...
16:02:35  INFO Aspect22          : after...
16:02:35  INFO Aspect23          : after...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_5-ä»£ç†æ–¹å¼"><a href="#_5-ä»£ç†æ–¹å¼" class="header-anchor">#</a> 5) ä»£ç†æ–¹å¼</h4> <p>Spring æ”¯æŒä¸¤ç§ä»£ç†æ–¹å¼</p> <ul><li>jdk åŠ¨æ€ä»£ç†
<ul><li>ä»…æ”¯æŒæ¥å£æ–¹å¼çš„ä»£ç†</li></ul></li> <li>cglib ä»£ç†
<ul><li>æ”¯æŒæ¥å£æ–¹å¼çš„ä»£ç†ï¼Œä»¥åŠå­ç±»æ–¹å¼çš„ä»£ç†</li></ul></li></ul> <p>ä½¿ç”¨å“ªä¸€ç§ï¼Ÿ</p> <ul><li>springboot é»˜è®¤é…ç½® <code>spring.aop.proxy-target-class=true</code> <ul><li>æ­¤æ—¶æ— è®ºç›®æ ‡æ˜¯å¦å®ç°æ¥å£ï¼Œéƒ½æ˜¯é‡‡ç”¨ã€cglib æŠ€æœ¯ã€‘ï¼Œç”Ÿæˆçš„éƒ½æ˜¯å­ç±»ä»£ç†</li></ul></li> <li>å¦‚æœè®¾ç½®äº† <code>spring.aop.proxy-target-class=false</code>ï¼Œé‚£ä¹ˆåˆåˆ†ä¸¤ç§æƒ…å†µ
<ul><li>å¦‚æœã€ç›®æ ‡ã€‘å®ç°äº†æ¥å£ï¼ŒSpring ä¼šã€jdk åŠ¨æ€ä»£ç†æŠ€æœ¯ã€‘ç”Ÿæˆä»£ç†</li> <li>å¦‚æœã€ç›®æ ‡ã€‘æ²¡æœ‰å®ç°æ¥å£ï¼ŒSpring ä¼šé‡‡ç”¨ã€cglib æŠ€æœ¯ã€‘ç”Ÿæˆä»£ç†</li></ul></li></ul> <p>åˆ‡é¢ç±»  Aspect1</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect6</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect6</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* foo(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>é…ç½®</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring.aop.proxy-target-class</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¾‹1ï¼Œç›®æ ‡å®ç°äº†æ¥å£ï¼Œä¼šé‡‡ç”¨ jdk åŠ¨æ€ä»£ç†</p> <p>æ¥å£ Service6</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Service6</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ¥å£ Service6 çš„å®ç°ç±» Service6Impl</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Service6Impl</span> <span class="token keyword">implements</span> <span class="token class-name">Service6</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Service6Impl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;foo()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æµ‹è¯•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Aop6Tests</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">Service6</span> service6<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        service6<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>service6<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>service6<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ç»“æœ</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>18:19:49  INFO Aspect6           : before
18:19:49  INFO Service6Impl      : foo()
class com.sun.proxy.$Proxy55
class java.lang.reflect.Proxy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><em><strong>æ€è€ƒ</strong></em></p> <ul><li>å¦‚æœæŠŠ <code>@Autowired private Service6 service6</code> æ¢æˆ <code>@Autowired private Service6Impl service6</code> è¡Œä¸è¡Œï¼Œä¸ºä»€ä¹ˆï¼Ÿ</li></ul></blockquote> <p>ä¾‹2ï¼Œç›®æ ‡å®ç°æ¥å£ï¼Œé‡‡ç”¨ cglib ä»£ç†çš„æƒ…å†µ</p> <p>é…ç½®ä¿®æ”¹ä¸ºï¼ˆæˆ–æ³¨é‡Šæ‰ä¹Ÿå¯ä»¥ï¼‰ï¼Œå…¶å®ƒä¸å˜</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring.aop.proxy-target-class</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç»“æœ</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>18:23:39  INFO Aspect6           : before
18:23:39  INFO Service6Impl      : foo()
class com.itheima.demo1.service.impl.Service6Impl$$EnhancerBySpringCGLIB$$fe669311
class com.itheima.demo1.service.impl.Service6Impl
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¯·å¤§å®¶è®°ä½ä»£ç†ç±»çš„åå­—ç‰¹å¾ï¼Œä»¥åå¯ä»¥ç®€å•åœ°ä»ç±»åä¸Šå°±èƒ½åˆ¤æ–­å‡ºæ˜¯å“ªç§ä»£ç†æ–¹å¼</p> <blockquote><p><em><strong>æ€è€ƒ</strong></em></p> <ul><li>å¦‚æœæŠŠ <code>@Autowired private Service6 service6</code> æ¢æˆ <code>@Autowired private Service6Impl service6</code> è¡Œä¸è¡Œï¼Œä¸ºä»€ä¹ˆï¼Ÿ</li></ul></blockquote> <p>å¦‚æœç›®æ ‡æ²¡æœ‰å®ç°æ¥å£ï¼Œåˆ™æ— è®ºå¦‚ä½•é…ç½®ï¼Œéƒ½é‡‡ç”¨ cglib ç”Ÿæˆå­ç±»ä»£ç†ï¼Œè¿™ä¸ªè¯·å¤§å®¶è‡ªè¡ŒéªŒè¯</p> <h4 id="_6-é€šçŸ¥å¤±æ•ˆ"><a href="#_6-é€šçŸ¥å¤±æ•ˆ" class="header-anchor">#</a> 6) é€šçŸ¥å¤±æ•ˆ</h4> <p>ä¾‹1ï¼ŒåŒä¸€ç±»å†…éƒ¨ï¼Œæ–¹æ³•1 è°ƒç”¨æ–¹æ³•2ï¼Œå¯¼è‡´æ–¹æ³•2 é€šçŸ¥å¤±æ•ˆ</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Service7</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Service7</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;m1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. è°ƒç”¨æœ¬ç±»æ–¹æ³•, é€šçŸ¥å¤±æ•ˆ!</span>
        <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;m2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>åˆ‡é¢ç±»</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aspect7</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Aspect7</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.itheima.demo1.service.Service7.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;before&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>æµ‹è¯•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Aop7Tests</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">Service7</span> service7<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// é€šè¿‡ m1 é—´æ¥è°ƒç”¨ m2, m1 çš„é€šçŸ¥ç”Ÿæ•ˆ, è€Œ m2 çš„é€šçŸ¥å¤±æ•ˆ</span>
        service7<span class="token punctuation">.</span><span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å•ç‹¬è°ƒç”¨ m2 æ²¡æœ‰é—®é¢˜, é€šçŸ¥ä¼šç”Ÿæ•ˆ</span>
        service7<span class="token punctuation">.</span><span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>m2 ç»“æœ</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>18:30:46  INFO Aspect7           : before
18:30:46  INFO Service7          : m2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>m1 ç»“æœ</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>18:33:24  INFO Aspect7           : before
18:33:24  INFO Service7          : m1
18:33:24  INFO Service7          : m2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä»è¿è¡Œç»“æœå¯ä»¥çœ‹å‡º</p> <ul><li>å½“æˆ‘ä»¬ç›´æ¥è°ƒç”¨ m2 æ–¹æ³•æ—¶ï¼Œm2 é€šçŸ¥ç”Ÿæ•ˆ</li> <li>ä½†æ˜¯å½“æˆ‘ä»¬é€šè¿‡ m1 æ–¹æ³•é—´æ¥è°ƒç”¨ m2 æ–¹æ³•æ—¶ï¼Œm1 é€šçŸ¥ç”Ÿæ•ˆï¼Œä½†æ˜¯ m2 é€šçŸ¥å¤±æ•ˆ</li></ul> <p>å¤±æ•ˆçš„åŸå› æ˜¯ï¼Œé€šè¿‡ m1 è°ƒç”¨ m2 æ—¶ï¼Œå¹¶æ²¡æœ‰èµ°ä»£ç†å¯¹è±¡è°ƒç”¨ m2ï¼Œæ²¡æœ‰æœºä¼šè¿›è¡Œé€šçŸ¥å¢å¼º</p> <h5 id="è§£å†³æ–¹æ³•1"><a href="#è§£å†³æ–¹æ³•1" class="header-anchor">#</a> è§£å†³æ–¹æ³•1</h5> <p>ä¸ºå¼•å¯¼ç±»æ·»åŠ å¦‚ä¸‹æ³¨è§£ï¼Œå¼€å¯ <code>expose-proxy=&quot;true&quot;</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableAspectJAutoProxy</span><span class="token punctuation">(</span>proxyTargetClass <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> exposeProxy <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo1Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Demo1Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Service7</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Service7</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Service7</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;m1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Service7</span><span class="token punctuation">)</span> <span class="token class-name">AopContext</span><span class="token punctuation">.</span><span class="token function">currentProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;m2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>é‡æ–°è¿è¡Œ m1 æµ‹è¯•ï¼Œç»“æœä¸º</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>18:37:35  INFO Aspect7           : before
18:37:35  INFO Service7          : m1
18:37:35  INFO Aspect7           : before
18:37:35  INFO Service7          : m2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="è§£å†³æ–¹æ³•2"><a href="#è§£å†³æ–¹æ³•2" class="header-anchor">#</a> è§£å†³æ–¹æ³•2</h5> <p>æ³¨å…¥ä»£ç†å¯¹è±¡æ¥è°ƒç”¨ï¼Œä¸éœ€è¦åŠ æ³¨è§£ @EnableAspectJAutoProxy å’Œå¼€å¯ <code>expose-proxy=&quot;true&quot;</code></p> <p>Service7</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Service7</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Service7</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">Service7</span> proxy<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;m1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxy<span class="token punctuation">.</span><span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;m2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>é‡æ–°è¿è¡Œ m1 æµ‹è¯•ï¼Œç»“æœä¸º</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>18:41:48  INFO Aspect7           : before
18:41:48  INFO Service7          : m1
18:41:48  INFO Aspect7           : before
18:41:48  INFO Service7          : m2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2-yaml"><a href="#_2-yaml" class="header-anchor">#</a> 2. yaml</h2> <h3 id="_2-1-yamlåŸºæœ¬è¯­æ³•"><a href="#_2-1-yamlåŸºæœ¬è¯­æ³•" class="header-anchor">#</a> 2.1 YamlåŸºæœ¬è¯­æ³•</h3> <p>è¯»éŸ³ [ËˆjÃ¦mÉ™l]</p> <p>Spring é™¤äº†æ”¯æŒ properties çš„é…ç½®æ–‡ä»¶æ ¼å¼ä»¥å¤–ï¼Œè¿˜æ”¯æŒ yaml æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸å˜ä»ç„¶å›ºå®šä¸º applicationï¼Œåç¼€å˜æˆ yaml æˆ– yml</p> <p>yaml åº”ç”¨è¿˜æ˜¯éå¸¸å¹¿æ³›çš„ï¼š</p> <ul><li>ç¬¬ä¸€ç§ç”¨é€”å°±åƒ propertiesï¼Œxml å¯ä»¥ä½œä¸ºç¨‹åºçš„é…ç½®æ–‡ä»¶</li> <li>ç¬¬äºŒç§ç”¨é€”è·Ÿ json æ›´åƒï¼Œå¯ä»¥ä½œä¸ºæ•°æ®çš„åºåˆ—åŒ–æ–¹å¼</li></ul> <p>ä¸‹é¢å°±æ¥å­¦ä¹  yaml çš„è¯­æ³•æ ¼å¼</p> <h4 id="_2-1-1-yamlè¯­æ³•"><a href="#_2-1-1-yamlè¯­æ³•" class="header-anchor">#</a> 2.1.1 yamlè¯­æ³•</h4> <ol><li>å¤§å°å†™æ•æ„Ÿ</li> <li>å†’å·ä¹‹åå¦‚æœæœ‰å€¼ï¼Œé‚£ä¹ˆå†’å·ä¸å€¼ä¹‹é—´å¿…é¡»åŠ ç©ºæ ¼ï¼ˆå¥½åœ¨ idea èƒ½è¯­æ³•é«˜äº®æç¤ºï¼‰</li> <li>ä»¥ç©ºæ ¼çš„ç¼©è¿›è¡¨ç¤ºå±‚æ¬¡å…³ç³»ï¼Œå·¦å¯¹é½çš„æ•°æ®å±äºåŒä¸€å±‚çº§çš„</li> <li>ä¸èƒ½ä»¥ tab çš„ç¼©è¿›è¡¨ç¤ºå±‚æ¬¡å…³ç³»ï¼ˆå¥½åœ¨ idea èƒ½å°† tab è‡ªåŠ¨è½¬ç©ºæ ¼ï¼‰</li> <li>æ³¨é‡Šä¸ properties ä¸€æ ·ï¼Œä½¿ç”¨ #</li> <li>ä¸€äº›ç‰¹æ®Šå­—ç¬¦å¦‚ <code>&amp;</code>ï¼Œ<code>*</code> ç­‰æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œè¦ç”¨å•å¼•å·æˆ–åŒå¼•å·å¼•èµ·æ¥</li> <li>å¯ä»¥ä½¿ç”¨ELè¡¨è¾¾å¼${}å¼•ç”¨æ–‡ä»¶ä¸­çš„å±æ€§</li></ol> <h4 id="_2-1-2-æ™®é€šé”®å€¼"><a href="#_2-1-2-æ™®é€šé”®å€¼" class="header-anchor">#</a> 2.1.2 æ™®é€šé”®å€¼</h4> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan
<span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2-1-3-å¯¹è±¡"><a href="#_2-1-3-å¯¹è±¡" class="header-anchor">#</a> 2.1.3 å¯¹è±¡</h4> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">user</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç­‰ä»·æ–¹å¼</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">user</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan<span class="token punctuation">,</span> <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-1-4-æ•°ç»„"><a href="#_2-1-4-æ•°ç»„" class="header-anchor">#</a> 2.1.4 æ•°ç»„</h4> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">user</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>
  <span class="token key atrule">address</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> è¥¿å®‰æœªå¤®åŒº
    <span class="token punctuation">-</span> è¥¿å®‰é›å¡”åŒº
    <span class="token punctuation">-</span> è¥¿å®‰ç¢‘æ—åŒº
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ç­‰ä»·æ–¹å¼</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">user</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>
  <span class="token key atrule">address</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> è¥¿å®‰æœªå¤®åŒº<span class="token punctuation">,</span>è¥¿å®‰é›å¡”åŒº<span class="token punctuation">,</span>è¥¿å®‰ç¢‘æ—åŒº <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-1-5-propertiesä¸yamlçš„å¯¹åº”å…³ç³»"><a href="#_2-1-5-propertiesä¸yamlçš„å¯¹åº”å…³ç³»" class="header-anchor">#</a> 2.1.5 propertiesä¸yamlçš„å¯¹åº”å…³ç³»</h4> <p>properties ä¸­çš„ <code>.</code> è§†ä¸º yaml ä¸­çš„å¯¹è±¡çš„å±‚çº§å…³ç³»å³å¯ï¼Œä¾‹å¦‚ï¼š</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring.aop.proxy-target-class</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¯¹åº”ä¸‹é¢çš„ yaml æ–‡æ¡£</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">aop</span><span class="token punctuation">:</span>
    <span class="token key atrule">proxy-target-class</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å®ƒä»¬éƒ½æ”¯æŒæ–‡æ¡£å†…çš„å˜é‡å¼•ç”¨ï¼Œä¾‹å¦‚æœ‰å¦‚ä¸‹é…ç½®</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">8080</span>
<span class="token key attr-name">app.host</span><span class="token punctuation">=</span><span class="token value attr-value">localhost</span>
<span class="token key attr-name">app.url</span><span class="token punctuation">=</span><span class="token value attr-value">http://${app.host}:${server.port}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æˆ–</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">app</span><span class="token punctuation">:</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
  <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//$<span class="token punctuation">{</span>app.host<span class="token punctuation">}</span><span class="token punctuation">:</span>$<span class="token punctuation">{</span>server.port<span class="token punctuation">}</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2-2-æ•°æ®è¯»å–"><a href="#_2-2-æ•°æ®è¯»å–" class="header-anchor">#</a> 2.2 æ•°æ®è¯»å–</h3> <h4 id="_2-2-1-åœ¨application-ymlä¸­å®šä¹‰æ•°æ®"><a href="#_2-2-1-åœ¨application-ymlä¸­å®šä¹‰æ•°æ®" class="header-anchor">#</a> 2.2.1 åœ¨application.ymlä¸­å®šä¹‰æ•°æ®</h4> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">user</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>
  <span class="token key atrule">address</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> è¥¿å®‰æœªå¤®åŒº
    <span class="token punctuation">-</span> è¥¿å®‰é›å¡”åŒº
    <span class="token punctuation">-</span> è¥¿å®‰ç¢‘æ—åŒº
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_2-2-2-å®šä¹‰javabean-å°è£…yamlä¸­çš„å±æ€§ã€‚"><a href="#_2-2-2-å®šä¹‰javabean-å°è£…yamlä¸­çš„å±æ€§ã€‚" class="header-anchor">#</a> 2.2.2 å®šä¹‰javabeanï¼Œå°è£…yamlä¸­çš„å±æ€§ã€‚</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Component</span><span class="token comment">//å¿…é¡»è¦æ·»åŠ åˆ°Springå®¹å™¨ä¸­æ‰èƒ½å°è£…</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> address<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_2-2-3-å•å…ƒæµ‹è¯•ä¸­è·å–æ•°æ®"><a href="#_2-2-3-å•å…ƒæµ‹è¯•ä¸­è·å–æ•°æ®" class="header-anchor">#</a> 2.2.3 å•å…ƒæµ‹è¯•ä¸­è·å–æ•°æ®</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Spring02ApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">User</span> user<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testYaml</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p><strong>springboot é»˜è®¤ä¼šä¼˜å…ˆåŠ è½½ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œæ­¤æ—¶è·å–åˆ°çš„user.nameçš„å€¼å®é™…ä¸ŠæŒ‡çš„æ˜¯å½“å‰è®¡ç®—æœºçš„ç”¨æˆ·åã€‚è€Œä¸æ˜¯properties/yamlé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„user.nameçš„å€¼ã€‚</strong></p> <p>è§£å†³æ–¹æ³•çš„è¯ï¼Œå°±æ˜¯<strong>å°½é‡ä¸è¦ä¸ç³»ç»Ÿç¯å¢ƒå˜é‡çš„åç§°ä¸€è‡´</strong>ï¼Œä¾‹å¦‚å°†<strong>user.name</strong>æ”¹ä¸º<strong>user.name</strong>å³å¯æˆ–è€…æ”¹ä¸ºå…¶ä»–çš„ï¼ˆå¦å¤–ï¼Œ<strong>username</strong>ä¹Ÿæ˜¯ä¼šè·å–åˆ°ç³»ç»Ÿå˜é‡åçš„ï¼‰ã€‚</p></blockquote> <h2 id="ä»Šæ—¥æ³¨è§£"><a href="#ä»Šæ—¥æ³¨è§£" class="header-anchor">#</a> ä»Šæ—¥æ³¨è§£</h2> <p>æœ¬ç« æ³¨è§£æ€»ç»“</p> <table><thead><tr><th>æ³¨è§£åç§°</th> <th>ä½ç½®</th> <th>æ³¨è§£ä½œç”¨</th> <th>å¤‡æ³¨</th></tr></thead> <tbody><tr><td>@Lazy</td> <td>æ–¹æ³•å‚æ•°</td> <td>è§£å†³æ„é€ å¾ªç¯ä¾èµ–</td> <td></td></tr> <tr><td>@Aspect</td> <td>ç±»ä¸Š</td> <td>æ ‡è¯†åˆ‡é¢ç±»</td> <td>è¯¥ç±»å¿…é¡»åŒæ—¶ä¹Ÿæ˜¯ bean</td></tr> <tr><td>@Around</td> <td>æ–¹æ³•ä¸Š</td> <td>ç¯ç»•é€šçŸ¥</td> <td>å¿…é¡»æä¾›  ProceedingJoinPoint å‚æ•°</td></tr> <tr><td>@Before</td> <td>æ–¹æ³•ä¸Š</td> <td>å‰ç½®é€šçŸ¥</td> <td></td></tr> <tr><td>@After</td> <td>æ–¹æ³•ä¸Š</td> <td>æ ‡è¯†åç½®é€šçŸ¥</td> <td></td></tr> <tr><td>@AfterReturning</td> <td>æ–¹æ³•ä¸Š</td> <td>è¿”å›åé€šçŸ¥</td> <td>å‡ºç°å¼‚å¸¸ä¸ä¼šè¿›å…¥é€šçŸ¥</td></tr> <tr><td>@AfterThrowing</td> <td>æ–¹æ³•ä¸Š</td> <td>å¼‚å¸¸åé€šçŸ¥</td> <td></td></tr> <tr><td>@Pointcut</td> <td>æ–¹æ³•ä¸Š</td> <td>æ ‡è¯†åˆ‡ç‚¹</td> <td>æ ‡è¯†çš„æ–¹æ³•æ— å‚ï¼Œæ— è¿”å›å€¼ï¼Œæ— å®ç°</td></tr> <tr><td>@Order</td> <td>ç±»ä¸Š</td> <td>æ ‡è¯†é¡ºåº</td> <td>æ•°å­—å°çš„ä¼˜å…ˆçº§é«˜ï¼Œä¸åŒåˆ‡é¢ç±»ä¼˜å…ˆçº§æ‰æœ‰æ„ä¹‰</td></tr></tbody></table></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°æ—¶é—´:</span> <span class="time">2023/2/14</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/SpringBootæ–‡æ¡£/01-Spring-IOC.html" class="prev">
        01-Spring-IOC
      </a></span> <span class="next"><a href="/SpringBootæ–‡æ¡£/03-Spring-äº‹åŠ¡.html">
        03-Spring-äº‹åŠ¡
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a19eb3cb.js" defer></script><script src="/assets/js/2.34fff606.js" defer></script><script src="/assets/js/1.16393a26.js" defer></script><script src="/assets/js/98.9d539c75.js" defer></script>
  </body>
</html>
