(window.webpackJsonp=window.webpackJsonp||[]).push([[222],{505:function(t,s,_){"use strict";_.r(s);var v=_(14),a=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"sql刷题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sql刷题"}},[t._v("#")]),t._v(" SQL刷题")]),t._v(" "),s("h2",{attrs:{id:"sql33-找出每个学校gpa最低的同学"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sql33-找出每个学校gpa最低的同学"}},[t._v("#")]),t._v(" "),s("strong",[t._v("SQL33")]),t._v(" 找出每个学校GPA最低的同学")]),t._v(" "),s("p",[t._v("题目：现在运营想要找到每个学校"),s("code",[t._v("gpa")]),t._v("最低的同学来做调研，请你取出每个学校的最低"),s("code",[t._v("gpa")]),t._v("。")]),t._v(" "),s("p",[t._v("示例："),s("code",[t._v("user_profile")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("id")]),t._v(" "),s("th",[t._v("device_id")]),t._v(" "),s("th",[t._v("gender")]),t._v(" "),s("th",[t._v("age")]),t._v(" "),s("th",[t._v("university")]),t._v(" "),s("th",[t._v("gpa")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[t._v("2138")]),t._v(" "),s("td",[t._v("male")]),t._v(" "),s("td",[t._v("21")]),t._v(" "),s("td",[t._v("北京大学")]),t._v(" "),s("td",[t._v("3.4")])]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[t._v("3214")]),t._v(" "),s("td",[t._v("male")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("4")])]),t._v(" "),s("tr",[s("td",[t._v("3")]),t._v(" "),s("td",[t._v("6543")]),t._v(" "),s("td",[t._v("female")]),t._v(" "),s("td",[t._v("20")]),t._v(" "),s("td",[t._v("北京大学")]),t._v(" "),s("td",[t._v("3.2")])]),t._v(" "),s("tr",[s("td",[t._v("4")]),t._v(" "),s("td",[t._v("2315")]),t._v(" "),s("td",[t._v("female")]),t._v(" "),s("td",[t._v("23")]),t._v(" "),s("td",[t._v("浙江大学")]),t._v(" "),s("td",[t._v("3.6")])]),t._v(" "),s("tr",[s("td",[t._v("5")]),t._v(" "),s("td",[t._v("5432")]),t._v(" "),s("td",[t._v("male")]),t._v(" "),s("td",[t._v("25")]),t._v(" "),s("td",[t._v("山东大学")]),t._v(" "),s("td",[t._v("3.8")])]),t._v(" "),s("tr",[s("td",[t._v("6")]),t._v(" "),s("td",[t._v("2131")]),t._v(" "),s("td",[t._v("male")]),t._v(" "),s("td",[t._v("28")]),t._v(" "),s("td",[t._v("山东大学")]),t._v(" "),s("td",[t._v("3.3")])]),t._v(" "),s("tr",[s("td",[t._v("7")]),t._v(" "),s("td",[t._v("4321")]),t._v(" "),s("td",[t._v("female")]),t._v(" "),s("td",[t._v("26")]),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("3.6")])])])]),t._v(" "),s("p",[t._v("根据示例，你的查询结果应参考以下格式，输出结果按"),s("code",[t._v("university")]),t._v("升序排序：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("device_id")]),t._v(" "),s("th",[t._v("university")]),t._v(" "),s("th",[t._v("gpa")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("6543")]),t._v(" "),s("td",[t._v("北京大学")]),t._v(" "),s("td",[t._v("3.2000")])]),t._v(" "),s("tr",[s("td",[t._v("4321")]),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("3.6000")])]),t._v(" "),s("tr",[s("td",[t._v("2131")]),t._v(" "),s("td",[t._v("山东大学")]),t._v(" "),s("td",[t._v("3.3000")])]),t._v(" "),s("tr",[s("td",[t._v("2315")]),t._v(" "),s("td",[t._v("浙江大学")]),t._v(" "),s("td",[t._v("3.6000")])])])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("我的解答")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n    device_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    university"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("min")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gpa"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" gpa\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v("\n    user_profile\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("group")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v("\n\tdevice_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    university\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("order")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v("\n    university\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[s("strong",[t._v("查询结果")]),t._v("：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("device_id")]),t._v(" "),s("th",[t._v("university")]),t._v(" "),s("th",[t._v("gpa")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("6543")]),t._v(" "),s("td",[t._v("北京大学")]),t._v(" "),s("td",[t._v("3.2")])]),t._v(" "),s("tr",[s("td",[t._v("2138")]),t._v(" "),s("td",[t._v("北京大学")]),t._v(" "),s("td",[t._v("3.4")])]),t._v(" "),s("tr",[s("td",[t._v("3214")]),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("4.0")])]),t._v(" "),s("tr",[s("td",[t._v("4321")]),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("3.6")])]),t._v(" "),s("tr",[s("td",[t._v("2131")]),t._v(" "),s("td",[t._v("山东大学")]),t._v(" "),s("td",[t._v("3.3")])]),t._v(" "),s("tr",[s("td",[t._v("5432")]),t._v(" "),s("td",[t._v("山东大学")]),t._v(" "),s("td",[t._v("3.8")])]),t._v(" "),s("tr",[s("td",[t._v("2315")]),t._v(" "),s("td",[t._v("浙江大学")]),t._v(" "),s("td",[t._v("3.6")])])])]),t._v(" "),s("p",[t._v("很明显我没有考虑每个大学会存在多个设备id的问题。")]),t._v(" "),s("p",[s("strong",[t._v("修改后的SQL如下：")])]),t._v(" "),s("div",{staticClass:"language-SQL line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n    device_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    university"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    gpa\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v("\n    user_profile "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" t1\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v("\n    gpa "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("min")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gpa"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v("\n            user_profile "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" t2\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v("\n            t1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("university "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("university\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("order")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v("\n    university\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("blockquote",[s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("min")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gpa"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v("\n\tuser_profile\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("如果只执行了这个 SQL 查询语句，那么查询结果就只会返回一个值，即 "),s("code",[t._v("user_profile")]),t._v(" 表中 GPA 的最低值。不过，我们在原始 SQL 查询语句中使用了该子查询语句作为 "),s("code",[t._v("SELECT")]),t._v("子句中的一部分，以便计算每个大学对应的最低 "),s("code",[t._v("GPA")]),t._v("值。")]),t._v(" "),s("p",[t._v("当查询语句执行时，主查询会对 "),s("code",[t._v("user_profile")]),t._v(" 表中的每一行进行扫描，并在子查询（即 "),s("code",[t._v("SELECT")]),t._v("子句中嵌套的子查询）中找到与该行所对应学校相同的所有行，并从中找到 "),s("code",[t._v("GPA")]),t._v("最低的行。因此，主查询中的结果集将包含每个大学对应的最低 "),s("code",[t._v("GPA")]),t._v("值，而非整个表的最低 "),s("code",[t._v("GPA")]),t._v("值。")])]),t._v(" "),s("p",[t._v("这个 SQL 查询中，我们使用了两个表别名："),s("code",[t._v("t1")]),t._v(" 和 "),s("code",[t._v("t2")]),t._v("。在主查询中，我们选取 "),s("code",[t._v("user_profile")]),t._v(" 表中所有符合条件的行，即 "),s("code",[t._v("GPA")]),t._v("值等于该学校中最低 "),s("code",[t._v("GPA")]),t._v("的行。为了找到每个学校对应的最低 "),s("code",[t._v("GPA")]),t._v("值，我们使用了一个子查询（即 "),s("code",[t._v("SELECT")]),t._v("子句中嵌套的子查询），该子查询会返回当前行所对应学校的最低 "),s("code",[t._v("GPA")]),t._v("值。")]),t._v(" "),s("p",[t._v("子查询中使用了与主查询中相同的表别名 "),s("code",[t._v("t2")]),t._v("，并使用 "),s("code",[t._v("WHERE")]),t._v("子句筛选出与当前行所对应学校相同的所有行，然后使用 "),s("code",[t._v("MIN")]),t._v("函数找到 "),s("code",[t._v("GPA")]),t._v("最低的那一行。由于子查询使用了主查询中的某些值（即使用 "),s("code",[t._v("t1.university")]),t._v(" 与 "),s("code",[t._v("t2.university")]),t._v(" 进行关联），因此该子查询被称为“关联查询”。")]),t._v(" "),s("p",[t._v("当主查询执行时，对于 "),s("code",[t._v("user_profile")]),t._v(" 中的每一行，它都会执行子查询以获取与该行所对应学校的最低 "),s("code",[t._v("GPA")]),t._v("值相同的所有行。如果找到多个行，则主查询将选取其中任意一行作为结果；如果未能找到匹配行，则该行将不会包含在结果集中。")]),t._v(" "),s("p",[s("strong",[t._v("返回结果")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("device_id")]),t._v(" "),s("th",[t._v("university")]),t._v(" "),s("th",[t._v("gpa")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("6543")]),t._v(" "),s("td",[t._v("北京大学")]),t._v(" "),s("td",[t._v("3.2000")])]),t._v(" "),s("tr",[s("td",[t._v("4321")]),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("3.6000")])]),t._v(" "),s("tr",[s("td",[t._v("2131")]),t._v(" "),s("td",[t._v("山东大学")]),t._v(" "),s("td",[t._v("3.3000")])]),t._v(" "),s("tr",[s("td",[t._v("2315")]),t._v(" "),s("td",[t._v("浙江大学")]),t._v(" "),s("td",[t._v("3.6000")])])])]),t._v(" "),s("h2",{attrs:{id:"sql34-统计复旦用户8月练题情况"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sql34-统计复旦用户8月练题情况"}},[t._v("#")]),t._v(" "),s("strong",[t._v("SQL34")]),t._v(" 统计复旦用户8月练题情况")]),t._v(" "),s("p",[t._v("题目： 现在运营想要了解复旦大学的每个用户在"),s("code",[t._v("8")]),t._v("月份练习的总题目数和回答正确的题目数情况，请取出相应明细数据，对于在"),s("code",[t._v("8")]),t._v("月份没有练习过的用户，答题数结果返回"),s("code",[t._v("0")]),t._v(".")]),t._v(" "),s("p",[t._v("示例：用户信息表"),s("code",[t._v("user_profile")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("id")]),t._v(" "),s("th",[t._v("device_id")]),t._v(" "),s("th",[t._v("gender")]),t._v(" "),s("th",[t._v("age")]),t._v(" "),s("th",[t._v("university")]),t._v(" "),s("th",[t._v("gpa")]),t._v(" "),s("th",[t._v("active_days_within_30")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[t._v("2138")]),t._v(" "),s("td",[t._v("male")]),t._v(" "),s("td",[t._v("21")]),t._v(" "),s("td",[t._v("北京大学")]),t._v(" "),s("td",[t._v("3.4")]),t._v(" "),s("td",[t._v("7")])]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[t._v("3214")]),t._v(" "),s("td",[t._v("male")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("4.0")]),t._v(" "),s("td",[t._v("15")])]),t._v(" "),s("tr",[s("td",[t._v("3")]),t._v(" "),s("td",[t._v("6543")]),t._v(" "),s("td",[t._v("female")]),t._v(" "),s("td",[t._v("20")]),t._v(" "),s("td",[t._v("北京大学")]),t._v(" "),s("td",[t._v("3.2")]),t._v(" "),s("td",[t._v("12")])]),t._v(" "),s("tr",[s("td",[t._v("4")]),t._v(" "),s("td",[t._v("2315")]),t._v(" "),s("td",[t._v("female")]),t._v(" "),s("td",[t._v("23")]),t._v(" "),s("td",[t._v("浙江大学")]),t._v(" "),s("td",[t._v("3.6")]),t._v(" "),s("td",[t._v("5")])]),t._v(" "),s("tr",[s("td",[t._v("5")]),t._v(" "),s("td",[t._v("5432")]),t._v(" "),s("td",[t._v("male")]),t._v(" "),s("td",[t._v("25")]),t._v(" "),s("td",[t._v("山东大学")]),t._v(" "),s("td",[t._v("3.8")]),t._v(" "),s("td",[t._v("20")])]),t._v(" "),s("tr",[s("td",[t._v("6")]),t._v(" "),s("td",[t._v("2131")]),t._v(" "),s("td",[t._v("male")]),t._v(" "),s("td",[t._v("28")]),t._v(" "),s("td",[t._v("山东大学")]),t._v(" "),s("td",[t._v("3.3")]),t._v(" "),s("td",[t._v("15")])]),t._v(" "),s("tr",[s("td",[t._v("7")]),t._v(" "),s("td",[t._v("4321")]),t._v(" "),s("td",[t._v("female")]),t._v(" "),s("td",[t._v("26")]),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("3.6")]),t._v(" "),s("td",[t._v("9")])])])]),t._v(" "),s("p",[t._v("示例："),s("code",[t._v("question_practice_detail")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("id")]),t._v(" "),s("th",[t._v("device_id")]),t._v(" "),s("th",[t._v("question_id")]),t._v(" "),s("th",[t._v("result")]),t._v(" "),s("th",[t._v("date")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[t._v("2138")]),t._v(" "),s("td",[t._v("111")]),t._v(" "),s("td",[t._v("wrong")]),t._v(" "),s("td",[t._v("2021-05-03")])]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[t._v("3214")]),t._v(" "),s("td",[t._v("112")]),t._v(" "),s("td",[t._v("wrong")]),t._v(" "),s("td",[t._v("2021-05-09")])]),t._v(" "),s("tr",[s("td",[t._v("3")]),t._v(" "),s("td",[t._v("3214")]),t._v(" "),s("td",[t._v("113")]),t._v(" "),s("td",[t._v("wrong")]),t._v(" "),s("td",[t._v("2021-06-15")])]),t._v(" "),s("tr",[s("td",[t._v("4")]),t._v(" "),s("td",[t._v("6543")]),t._v(" "),s("td",[t._v("111")]),t._v(" "),s("td",[t._v("right")]),t._v(" "),s("td",[t._v("2021-08-13")])]),t._v(" "),s("tr",[s("td",[t._v("5")]),t._v(" "),s("td",[t._v("2315")]),t._v(" "),s("td",[t._v("115")]),t._v(" "),s("td",[t._v("right")]),t._v(" "),s("td",[t._v("2021-08-13")])]),t._v(" "),s("tr",[s("td",[t._v("6")]),t._v(" "),s("td",[t._v("2315")]),t._v(" "),s("td",[t._v("116")]),t._v(" "),s("td",[t._v("right")]),t._v(" "),s("td",[t._v("2021-08-14")])]),t._v(" "),s("tr",[s("td",[t._v("7")]),t._v(" "),s("td",[t._v("2315")]),t._v(" "),s("td",[t._v("117")]),t._v(" "),s("td",[t._v("wrong")]),t._v(" "),s("td",[t._v("2021-08-15")])]),t._v(" "),s("tr",[s("td",[t._v("……")]),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td")])])]),t._v(" "),s("p",[t._v("根据示例，你的查询应返回以下结果：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("device_id")]),t._v(" "),s("th",[t._v("university")]),t._v(" "),s("th",[t._v("question_cnt")]),t._v(" "),s("th",[t._v("right_question_cnt")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("3214")]),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("3")]),t._v(" "),s("td",[t._v("0")])]),t._v(" "),s("tr",[s("td",[t._v("4321")]),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("0")]),t._v(" "),s("td",[t._v("0")])])])]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("我的SQL如下")]),t._v(" "),s("div",{staticClass:"language-SQL line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n    u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("university"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("q"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" question_cnt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'right'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" right_question_cnt\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v("\n    user_profile "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" u\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("left")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),t._v(" question_practice_detail "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" q "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" q"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v("\n    u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("university "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'复旦大学'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("month")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("q"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("group")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v("\n    u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[t._v("查询结果")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("device_id")]),t._v(" "),s("th",[t._v("university")]),t._v(" "),s("th",[t._v("question_cnt")]),t._v(" "),s("th",[t._v("right_question_cnt")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("3214")]),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("3")]),t._v(" "),s("td",[t._v("0")])])])]),t._v(" "),s("p",[t._v("可以看到对于"),s("code",[t._v("8")]),t._v("月份没有做题的"),s("code",[t._v("4321")]),t._v("设备的用户，并没有查询出来。")]),t._v(" "),s("p",[s("strong",[t._v("修改SQL如下")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n    u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("university"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("q"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" question_cnt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'right'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" right_question_cnt\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v("\n    user_profile "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" u\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("left")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),t._v(" question_practice_detail "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" q "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" q"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("month")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("q"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v("\n    u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("university "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'复旦大学'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("group")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v("\n    u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[t._v("查询结果")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("device_id")]),t._v(" "),s("th",[t._v("university")]),t._v(" "),s("th",[t._v("question_cnt")]),t._v(" "),s("th",[t._v("right_question_cnt")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("3214")]),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("3")]),t._v(" "),s("td",[t._v("0")])]),t._v(" "),s("tr",[s("td",[t._v("4321")]),t._v(" "),s("td",[t._v("复旦大学")]),t._v(" "),s("td",[t._v("0")]),t._v(" "),s("td",[t._v("0")])])])]),t._v(" "),s("p",[t._v("查询结果正确")]),t._v(" "),s("blockquote",[s("p",[t._v("这两个 SQL 查询的区别在于左连接 "),s("code",[t._v("question_practice_detail")]),t._v(" 表和主查询的时机不同。")]),t._v(" "),s("p",[t._v("第一个 SQL 查询中，左连接发生在 "),s("code",[t._v("WHERE")]),t._v("子句之前，使用了一个 "),s("code",[t._v("ON")]),t._v("子句来过滤月份为 "),s("code",[t._v("8")]),t._v(" 的记录，如下所示：")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("left")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),t._v(" question_practice_detail "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" q "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" q"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device_id\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("month")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("q"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("而第二个 SQL 查询中，则是在 "),s("code",[t._v("WHERE")]),t._v("子句中使用了与 "),s("code",[t._v("ON")]),t._v("子句相同的过滤条件，如下所示：")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("university "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'复旦大学'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("month")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("q"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("从功能上来说，这两个查询是等效的。它们都返回了在 "),s("code",[t._v("user_profile")]),t._v(" 表中，大学为“复旦大学”且在 8 月份有做过练习题的用户信息，包括设备号、大学名称、答题次数以及回答正确的次数。在 "),s("code",[t._v("GROUP BY")]),t._v(" 子句中，用户信息按设备号进行分组，因此每个设备只会出现一次。")]),t._v(" "),s("p",[s("strong",[t._v("需要注意的是，在第一个查询中，"),s("code",[t._v("ON")]),t._v("子句中的筛选条件（即 "),s("code",[t._v("month(q.date) = 8")]),t._v("）作用于左连接的结果集，而不是主查询的结果集。因此，如果某个用户在该月没有做过练习题，则该用户的信息仍然会出现在结果集中，但是 "),s("code",[t._v("question_cnt")]),t._v(" 和 "),s("code",[t._v("right_question_cnt")]),t._v(" 会被设置为 "),s("code",[t._v("NULL")]),t._v("。在第二个查询中，由于 "),s("code",[t._v("WHERE")]),t._v("子句中的条件过滤了未做练习题的用户，因此不会出现这种情况。")])])]),t._v(" "),s("blockquote",[s("p",[t._v("左连接和 "),s("code",[t._v("WHERE")]),t._v("连接查询的区别在于左连接保留了左表中所有的记录，而WHERE 连接只返回符合条件的记录。")]),t._v(" "),s("p",[t._v("左连接是指在连接两个表时，保留左表中的所有记录，不管右表中是否有匹配的记录。这意味着，在左表中没有匹配到右表中的记录时，对应的结果集中会使用 NULL 值来填充右表中相关的列的值。左连接通常用于需要包含左表中所有数据的查询，以及查询两个表之间关系的查询。")]),t._v(" "),s("p",[s("code",[t._v("WHERE")]),t._v("连接是指在连接两个表时，使用 "),s("code",[t._v("WHERE")]),t._v("子句来过滤数据并仅返回符合条件的记录。这种连接只返回两个表之间匹配的记录，因此结果集将小于两个表中任何一个表的总记录数。WHERE 连接通常用于需要从多个表中选择特定条件的查询。")]),t._v(" "),s("p",[t._v("例如，假设我们有两个表 "),s("code",[t._v("A")]),t._v("和 "),s("code",[t._v("B")]),t._v("。如果我们要找出 "),s("code",[t._v("A")]),t._v("中所有记录，无论它是否存在于 "),s("code",[t._v("B")]),t._v("中，我们可以使用左连接。左连接将从 A 中选择所有记录，并为 "),s("code",[t._v("B")]),t._v("中所有匹配的记录填入相应的列。如果我们只需要选择 "),s("code",[t._v("A")]),t._v(" 和 "),s("code",[t._v("B")]),t._v("中都存在的记录，则可以使用 "),s("code",[t._v("WHERE")]),t._v("连接，在 "),s("code",[t._v("WHERE")]),t._v("子句中指定匹配条件。")]),t._v(" "),s("p",[t._v("总之，左连接和 "),s("code",[t._v("WHERE")]),t._v("连接的使用取决于需求。**左连接适用于需要包含左表中所有数据的查询，而"),s("code",[t._v("WHERE")]),t._v("连接适用于需要选择特定条件的查询。**如果您需要从两个表中进行选择，则可以使用其中任何一种连接类型。")])])])}),[],!1,null,null,null);s.default=a.exports}}]);