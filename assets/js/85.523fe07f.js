(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{366:function(e,s,i){"use strict";i.r(s);var r=i(14),v=Object(r.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"redis入门"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis入门"}},[e._v("#")]),e._v(" Redis入门")]),e._v(" "),s("h2",{attrs:{id:"redis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis"}},[e._v("#")]),e._v(" Redis")]),e._v(" "),s("h3",{attrs:{id:"什么是-redis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是-redis"}},[e._v("#")]),e._v(" 什么是 Redis ？")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("Redis是一个基于内存的key-value结构数据库。")])]),e._v(" "),s("li",[s("p",[e._v("基于内存存储，读写性能高")])]),e._v(" "),s("li",[s("p",[e._v("适合存储热点数据（热点商品、资讯、新闻）")])]),e._v(" "),s("li",[s("p",[e._v("企业应用广泛")])])]),e._v(" "),s("h3",{attrs:{id:"redis简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis简介"}},[e._v("#")]),e._v(" Redis简介")]),e._v(" "),s("p",[s("a",{attrs:{href:"http://redis.cn/",target:"_blank",rel:"noopener noreferrer"}},[e._v("官网"),s("OutboundLink")],1),e._v("：")]),e._v(" "),s("ul",[s("li",[e._v("Redis是一个开源的内存中的数据结构存储系统，它可以用作 ：数据库、缓存和消息中间件。")]),e._v(" "),s("li",[e._v("Redis是用C语言开发的一个开源的高性能键值对(key-value)数据库，官方提供的数据是可以达到100000+的QPS （每秒内查询次数）。它存储的value类型比较丰富，也被称为结构化的NoSql数据库。")]),e._v(" "),s("li",[e._v("NoSql（Not Only SQL），不仅仅是SQL，泛指"),s("strong",[e._v("非关系型数据库")]),e._v("。NoSql数据库并不是要取代关系型数据库，而是 关系型数据库的补充。")])]),e._v(" "),s("blockquote",[s("p",[e._v("关系型数据库(RDBMS)")]),e._v(" "),s("ul",[s("li",[e._v("Mysql")]),e._v(" "),s("li",[e._v("Oracle")]),e._v(" "),s("li",[e._v("DB2")]),e._v(" "),s("li",[e._v("SQLServer")])]),e._v(" "),s("p",[e._v("非关系型数据库(NoSql)")]),e._v(" "),s("ul",[s("li",[e._v("Redis")]),e._v(" "),s("li",[e._v("Mongo db")]),e._v(" "),s("li",[e._v("MemCached")])])]),e._v(" "),s("h3",{attrs:{id:"redis的应用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis的应用场景"}},[e._v("#")]),e._v(" Redis的应用场景")]),e._v(" "),s("ul",[s("li",[e._v("缓存数据")]),e._v(" "),s("li",[e._v("任务队列")]),e._v(" "),s("li",[e._v("消息队列MQ")]),e._v(" "),s("li",[e._v("分布式锁")])]),e._v(" "),s("h3",{attrs:{id:"redis下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis下载"}},[e._v("#")]),e._v(" Redis下载")]),e._v(" "),s("p",[e._v("Redis安装包分为windows版和Linux版")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("Windows版下载地址：https://github.com/microsoftarchive/redis/releases")])]),e._v(" "),s("li",[s("p",[e._v("Linux版下载地址： https://download.redis.io/releases/")])])]),e._v(" "),s("h3",{attrs:{id:"redis安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis安装"}},[e._v("#")]),e._v(" Redis安装")]),e._v(" "),s("p",[e._v("在Window系统安装Redis步骤：")]),e._v(" "),s("ul",[s("li",[e._v("直接解压即可使用")])]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("在Linux系统安装Redis步骤：")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("将Redis安装包上传到Linux")])]),e._v(" "),s("li",[s("p",[e._v("解压安装包，命令：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("tar -zxvf redis-4.0.0.tar.gz -C /usr/local\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("安装Redis的依赖环境gcc，命令：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("yum install –y gcc-c++\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("进入/usr/local/redis-4.0.0，进行编译，命令：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("make\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("进入redis的src目录，进行安装，命令：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("make instal\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])])]),e._v(" "),s("h3",{attrs:{id:"redis服务启动与停止"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis服务启动与停止"}},[e._v("#")]),e._v(" Redis服务启动与停止")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("Windows系统中启动Redis")]),e._v(" "),s("ul",[s("li",[e._v("双击"),s("code",[e._v("redis-server.exe")]),e._v("即可启动Redis服务")]),e._v(" "),s("li",[e._v("默认端口号为"),s("code",[e._v("6379")]),e._v("，Ctrl + C停止Redis服务")])])]),e._v(" "),s("li",[s("p",[e._v("Linux系统中启动Redis")]),e._v(" "),s("ul",[s("li",[e._v("使用 "),s("code",[e._v("./redis-server")])]),e._v(" "),s("li",[e._v("默认端口号为"),s("code",[e._v("6379")]),e._v("，Ctrl + C停止Redis服务")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/demo223/pictures/master/img/image-20221213150549785.png",alt:"image-20221213150549785"}})])]),e._v(" "),s("li",[s("p",[e._v("客户端启动")]),e._v(" "),s("p",[e._v("要想启动当前Redis的客户端，必须先启动当前Redis的服务端")]),e._v(" "),s("p",[e._v("然后切换至Redis安装目录下，执行"),s("code",[e._v("src/redis-cli")]),e._v("命令")]),e._v(" "),s("p",[e._v("不论是启动redis-server还是启动redis-cli，实际上就是执行redis-server（或redis-cli）文件，不论在哪里\n启动，只要能定位到该文件即可")])]),e._v(" "),s("li",[s("p",[e._v("客户端关闭")]),e._v(" "),s("p",[e._v("在linux中，可以利用“Redis Shutdown”命令关闭redis服务器，语法为“"),s("code",[e._v("redis-cli shutdown")]),e._v("”；执行失败时返回错误，执行成功时不返回任何信息，服务器和客户端的连接断开，客户端自动退出。")]),e._v(" "),s("p",[s("code",[e._v("redis-cli shutdown")])])])]),e._v(" "),s("h3",{attrs:{id:"redis配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis配置文件"}},[e._v("#")]),e._v(" Redis配置文件")]),e._v(" "),s("p",[e._v("Windows中Redis的配置文件：redis.windows.conf")]),e._v(" "),s("p",[e._v("Linux中Redis的配置文件：redis.conf")]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("Redis相关核心配置介绍：")]),e._v(" "),s("ul",[s("li",[e._v("Redis后台运行daemonize yes。注意：Windows版不支持")]),e._v(" "),s("li",[e._v("Redis密码配置requirepass 123456，默认不开启。")]),e._v(" "),s("li",[e._v("Redis默认bind 127.0.0.1只能本地连接，使用#注释掉")]),e._v(" "),s("li",[e._v("Redis关闭保护模式protected-mode no，默认开启，开启保护模式时，必须要设置密码才能远程连接")])]),e._v(" "),s("p",[e._v("修改Redis配置文件步骤如下：")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("在Redis文件目录下执行")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("vim redis.conf\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("打开文件后搜索关键字，输入"),s("code",[e._v("/daemonize")]),e._v("，找到后进入插入模式把后面的"),s("code",[e._v("no")]),e._v("改为"),s("code",[e._v("yes")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/demo223/pictures/master/img/image-20221213151652652.png",alt:"image-20221213151652652"}})])]),e._v(" "),s("li",[s("p",[e._v("然后输入")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("src/redis-server ./redis.conf\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])])]),e._v(" "),s("h3",{attrs:{id:"redis的外部访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis的外部访问"}},[e._v("#")]),e._v(" Redis的外部访问")]),e._v(" "),s("p",[e._v("默认情况下，Redis服务器不允许远程访问，只允许本机访问，所以我们需要设置打开远程访问的功能。")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("打开Redis服务器的配置文件 "),s("code",[e._v("redis.conf")])])]),e._v(" "),s("li",[s("p",[e._v("使用注释符号 "),s("code",[e._v("#")]),e._v(" 注释"),s("code",[e._v("bind 127.0.0.1")]),e._v("这行")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/demo223/pictures/master/img/image-20221214215054192.png",alt:"image-20221214215054192"}})])]),e._v(" "),s("li",[s("p",[s("code",[e._v("protected-mode yes")]),e._v(" 改为 "),s("code",[e._v("protected-mode no")])]),e._v(" "),s("p",[e._v("注意: protected-mode 是3.2 之后加入的新特性，是为了禁止公网访问redis cache，加强redis安全的。如果你的redis版本低于3.2是找不到该配置项的，所以可以忽略。")])]),e._v(" "),s("li",[s("p",[e._v("如果还是远程连接不上，注意防火墙要放行"),s("code",[e._v("6379")]),e._v("端口，云服务器去安全组放行端口即可。")])]),e._v(" "),s("li",[s("p",[e._v("注意启动的时候要指定配置文件的形式启动才能进行远程访问")]),e._v(" "),s("p",[e._v("在"),s("code",[e._v("Redis")]),e._v("文件目录下执行 "),s("code",[e._v("src/redis-server ./redis.conf")]),e._v("以指定配置文件的规则启动")])])]),e._v(" "),s("h2",{attrs:{id:"redis的安全问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis的安全问题"}},[e._v("#")]),e._v(" Redis的安全问题")]),e._v(" "),s("h3",{attrs:{id:"redis密码设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis密码设置"}},[e._v("#")]),e._v(" Redis密码设置")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("在 redis 目录下 输入"),s("code",[e._v("src/redis-server ./redis.conf")]),e._v("修改配置文件")])]),e._v(" "),s("li",[s("p",[e._v("找到如下内容，在 "),s("code",[e._v("requirepass")]),e._v("后面设置密码")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("#requirepass foobared\nrequirepass 123456\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("登录验证密码是否设置成功")]),e._v(" "),s("p",[e._v("在 redis 目录下，输入如下命令")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" cd /usr/local/redis-4.0.0/\n src/redis-server ./redis.conf\n src/redis-cli\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("接下来进行相关的redis操作，如果弹出")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("(error) NOAUTH Authentication required.\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("则说明密码已经设置成功")]),e._v(" "),s("p",[e._v("接着输入密码")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("auth 密码\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("在登录成功后即可进行相关的 redis 操作")])]),e._v(" "),s("li",[s("p",[e._v("把"),s("code",[e._v("protected-mode")]),e._v(" 设置为 "),s("code",[e._v("yes")]),e._v("，外部访问开启密码保护")])])]),e._v(" "),s("h3",{attrs:{id:"云服务器的安全隐患问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#云服务器的安全隐患问题"}},[e._v("#")]),e._v(" 云服务器的安全隐患问题")]),e._v(" "),s("p",[e._v("在没有设置redis 的密码且开启外部访问的时候，很容易收到外部的攻击")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/demo223/pictures/master/img/image-20221217152527990.png",alt:"image-20221217152527990"}})]),e._v(" "),s("p",[e._v("外部的用户只需要知道用户的ip地址即可连接它的redis，因此极不安全，所以在开启对外访问的时候一定要开启密码验证。")])])}),[],!1,null,null,null);s.default=v.exports}}]);