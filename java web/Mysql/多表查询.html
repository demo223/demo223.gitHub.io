<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>多表查询 | 周岐的个人博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="logo.jpg">
    <meta name="description" content="个人技术博客">
    
    <link rel="preload" href="/assets/css/0.styles.8c53e149.css" as="style"><link rel="preload" href="/assets/js/app.a19eb3cb.js" as="script"><link rel="preload" href="/assets/js/2.34fff606.js" as="script"><link rel="preload" href="/assets/js/1.16393a26.js" as="script"><link rel="preload" href="/assets/js/171.6f79aeb1.js" as="script"><link rel="prefetch" href="/assets/js/10.717bd423.js"><link rel="prefetch" href="/assets/js/100.c5cd47b0.js"><link rel="prefetch" href="/assets/js/101.7151b423.js"><link rel="prefetch" href="/assets/js/102.6b36385a.js"><link rel="prefetch" href="/assets/js/103.d3861779.js"><link rel="prefetch" href="/assets/js/104.9578b311.js"><link rel="prefetch" href="/assets/js/105.aae477dc.js"><link rel="prefetch" href="/assets/js/106.1d5215a7.js"><link rel="prefetch" href="/assets/js/107.3c330c2f.js"><link rel="prefetch" href="/assets/js/108.cefc2802.js"><link rel="prefetch" href="/assets/js/109.541aa22e.js"><link rel="prefetch" href="/assets/js/11.e0bfb9a4.js"><link rel="prefetch" href="/assets/js/110.60e0b929.js"><link rel="prefetch" href="/assets/js/111.45058523.js"><link rel="prefetch" href="/assets/js/112.d10d50d0.js"><link rel="prefetch" href="/assets/js/113.4a3deb35.js"><link rel="prefetch" href="/assets/js/114.b917d1a1.js"><link rel="prefetch" href="/assets/js/115.50e3fa0f.js"><link rel="prefetch" href="/assets/js/116.78f04bf7.js"><link rel="prefetch" href="/assets/js/117.b5372645.js"><link rel="prefetch" href="/assets/js/118.f990eb5b.js"><link rel="prefetch" href="/assets/js/119.f178eabd.js"><link rel="prefetch" href="/assets/js/12.bdf46c02.js"><link rel="prefetch" href="/assets/js/120.d98a3aa8.js"><link rel="prefetch" href="/assets/js/121.abcdf60f.js"><link rel="prefetch" href="/assets/js/122.ed3550a9.js"><link rel="prefetch" href="/assets/js/123.8ef421f8.js"><link rel="prefetch" href="/assets/js/124.1adba2c7.js"><link rel="prefetch" href="/assets/js/125.6706c196.js"><link rel="prefetch" href="/assets/js/126.1e50c7b4.js"><link rel="prefetch" href="/assets/js/127.be9df6e0.js"><link rel="prefetch" href="/assets/js/128.9e68fe60.js"><link rel="prefetch" href="/assets/js/129.f9313e6a.js"><link rel="prefetch" href="/assets/js/13.05b00624.js"><link rel="prefetch" href="/assets/js/130.87d4d918.js"><link rel="prefetch" href="/assets/js/131.b7ab0bc3.js"><link rel="prefetch" href="/assets/js/132.4bf1103a.js"><link rel="prefetch" href="/assets/js/133.2bda9aa2.js"><link rel="prefetch" href="/assets/js/134.e6631028.js"><link rel="prefetch" href="/assets/js/135.5b78aed3.js"><link rel="prefetch" href="/assets/js/136.377fd687.js"><link rel="prefetch" href="/assets/js/137.623e1a9d.js"><link rel="prefetch" href="/assets/js/138.c2e1c9a1.js"><link rel="prefetch" href="/assets/js/139.6263f657.js"><link rel="prefetch" href="/assets/js/14.092a5584.js"><link rel="prefetch" href="/assets/js/140.a54c064d.js"><link rel="prefetch" href="/assets/js/141.0de2ed45.js"><link rel="prefetch" href="/assets/js/142.61ea0663.js"><link rel="prefetch" href="/assets/js/143.24d35022.js"><link rel="prefetch" href="/assets/js/144.196d7653.js"><link rel="prefetch" href="/assets/js/145.223f0fcf.js"><link rel="prefetch" href="/assets/js/146.a09f8d1b.js"><link rel="prefetch" href="/assets/js/147.62d69c7c.js"><link rel="prefetch" href="/assets/js/148.d46a05d0.js"><link rel="prefetch" href="/assets/js/149.467faf3d.js"><link rel="prefetch" href="/assets/js/15.758ee11b.js"><link rel="prefetch" href="/assets/js/150.0443932e.js"><link rel="prefetch" href="/assets/js/151.0879c074.js"><link rel="prefetch" href="/assets/js/152.4d08f8a9.js"><link rel="prefetch" href="/assets/js/153.ce46c4fa.js"><link rel="prefetch" href="/assets/js/154.fd65dd72.js"><link rel="prefetch" href="/assets/js/155.b975728f.js"><link rel="prefetch" href="/assets/js/156.61194924.js"><link rel="prefetch" href="/assets/js/157.97e4f54e.js"><link rel="prefetch" href="/assets/js/158.5290a2f0.js"><link rel="prefetch" href="/assets/js/159.3613e64b.js"><link rel="prefetch" href="/assets/js/16.2569be64.js"><link rel="prefetch" href="/assets/js/160.87d90e6b.js"><link rel="prefetch" href="/assets/js/161.a2a67f25.js"><link rel="prefetch" href="/assets/js/162.b51ccce1.js"><link rel="prefetch" href="/assets/js/163.85d33d23.js"><link rel="prefetch" href="/assets/js/164.5504b77f.js"><link rel="prefetch" href="/assets/js/165.be283131.js"><link rel="prefetch" href="/assets/js/166.8d0352c5.js"><link rel="prefetch" href="/assets/js/167.89c23a71.js"><link rel="prefetch" href="/assets/js/168.aa736b2c.js"><link rel="prefetch" href="/assets/js/169.296ccc1d.js"><link rel="prefetch" href="/assets/js/17.5b873df7.js"><link rel="prefetch" href="/assets/js/170.c706da49.js"><link rel="prefetch" href="/assets/js/172.ddcae302.js"><link rel="prefetch" href="/assets/js/173.f308eb43.js"><link rel="prefetch" href="/assets/js/174.b5ece966.js"><link rel="prefetch" href="/assets/js/175.538e3125.js"><link rel="prefetch" href="/assets/js/176.d54091dd.js"><link rel="prefetch" href="/assets/js/177.2ee0aa3d.js"><link rel="prefetch" href="/assets/js/178.667b3c59.js"><link rel="prefetch" href="/assets/js/179.07595c3e.js"><link rel="prefetch" href="/assets/js/18.4c170722.js"><link rel="prefetch" href="/assets/js/180.300e0b70.js"><link rel="prefetch" href="/assets/js/181.89473dcd.js"><link rel="prefetch" href="/assets/js/182.ea6036d1.js"><link rel="prefetch" href="/assets/js/183.647f8d55.js"><link rel="prefetch" href="/assets/js/184.2e79dd55.js"><link rel="prefetch" href="/assets/js/185.bf4d6269.js"><link rel="prefetch" href="/assets/js/186.7a7ceaa7.js"><link rel="prefetch" href="/assets/js/187.09bb0f21.js"><link rel="prefetch" href="/assets/js/188.3604ce73.js"><link rel="prefetch" href="/assets/js/189.49b47b33.js"><link rel="prefetch" href="/assets/js/19.a45744ea.js"><link rel="prefetch" href="/assets/js/190.88e59ff4.js"><link rel="prefetch" href="/assets/js/191.a4b3e5c7.js"><link rel="prefetch" href="/assets/js/192.7527e6ed.js"><link rel="prefetch" href="/assets/js/193.c44a652d.js"><link rel="prefetch" href="/assets/js/194.6aaca2ce.js"><link rel="prefetch" href="/assets/js/195.64837df2.js"><link rel="prefetch" href="/assets/js/196.e1bd3d69.js"><link rel="prefetch" href="/assets/js/197.2b01de81.js"><link rel="prefetch" href="/assets/js/198.d1496fd2.js"><link rel="prefetch" href="/assets/js/199.27ab1442.js"><link rel="prefetch" href="/assets/js/20.4cb27e25.js"><link rel="prefetch" href="/assets/js/200.996d49f4.js"><link rel="prefetch" href="/assets/js/201.b71a4422.js"><link rel="prefetch" href="/assets/js/202.0ea49eaa.js"><link rel="prefetch" href="/assets/js/203.8ebb1f77.js"><link rel="prefetch" href="/assets/js/204.c8d10533.js"><link rel="prefetch" href="/assets/js/205.0b8c4d0d.js"><link rel="prefetch" href="/assets/js/206.cce9bcce.js"><link rel="prefetch" href="/assets/js/207.8130e9ba.js"><link rel="prefetch" href="/assets/js/208.871753be.js"><link rel="prefetch" href="/assets/js/209.757eda19.js"><link rel="prefetch" href="/assets/js/21.445690e6.js"><link rel="prefetch" href="/assets/js/210.983cae1d.js"><link rel="prefetch" href="/assets/js/211.8e4ddaf8.js"><link rel="prefetch" href="/assets/js/212.6412fc61.js"><link rel="prefetch" href="/assets/js/213.656a6a73.js"><link rel="prefetch" href="/assets/js/214.befcd199.js"><link rel="prefetch" href="/assets/js/215.2c292e81.js"><link rel="prefetch" href="/assets/js/216.78cc7e8b.js"><link rel="prefetch" href="/assets/js/217.4fa8b1da.js"><link rel="prefetch" href="/assets/js/218.4c8cce7c.js"><link rel="prefetch" href="/assets/js/219.d041d013.js"><link rel="prefetch" href="/assets/js/22.bc7c4cdb.js"><link rel="prefetch" href="/assets/js/220.10a9ed88.js"><link rel="prefetch" href="/assets/js/221.bc25f391.js"><link rel="prefetch" href="/assets/js/222.dfdd15b7.js"><link rel="prefetch" href="/assets/js/223.1afa90d8.js"><link rel="prefetch" href="/assets/js/224.69bb037f.js"><link rel="prefetch" href="/assets/js/225.94590311.js"><link rel="prefetch" href="/assets/js/226.d1818961.js"><link rel="prefetch" href="/assets/js/227.2a969459.js"><link rel="prefetch" href="/assets/js/228.e3f5706b.js"><link rel="prefetch" href="/assets/js/229.0e6df830.js"><link rel="prefetch" href="/assets/js/23.b7994ecf.js"><link rel="prefetch" href="/assets/js/230.6bc93aa6.js"><link rel="prefetch" href="/assets/js/231.9b7cc0ec.js"><link rel="prefetch" href="/assets/js/232.80b7488d.js"><link rel="prefetch" href="/assets/js/233.302790de.js"><link rel="prefetch" href="/assets/js/234.68b70723.js"><link rel="prefetch" href="/assets/js/235.1b3c3110.js"><link rel="prefetch" href="/assets/js/236.e536b7bb.js"><link rel="prefetch" href="/assets/js/237.cca351a3.js"><link rel="prefetch" href="/assets/js/238.f4d0edb0.js"><link rel="prefetch" href="/assets/js/239.4f57e73d.js"><link rel="prefetch" href="/assets/js/24.26e26a07.js"><link rel="prefetch" href="/assets/js/240.1e76f670.js"><link rel="prefetch" href="/assets/js/241.8795d427.js"><link rel="prefetch" href="/assets/js/242.c72205cb.js"><link rel="prefetch" href="/assets/js/243.d7105431.js"><link rel="prefetch" href="/assets/js/244.361b2ea5.js"><link rel="prefetch" href="/assets/js/245.055fa0a3.js"><link rel="prefetch" href="/assets/js/246.0dee7b05.js"><link rel="prefetch" href="/assets/js/247.c13fc7d7.js"><link rel="prefetch" href="/assets/js/248.4e481dba.js"><link rel="prefetch" href="/assets/js/25.626c2c33.js"><link rel="prefetch" href="/assets/js/26.c4aa6beb.js"><link rel="prefetch" href="/assets/js/27.b1a828b7.js"><link rel="prefetch" href="/assets/js/28.f9133ade.js"><link rel="prefetch" href="/assets/js/29.54e09df1.js"><link rel="prefetch" href="/assets/js/3.4db2e19a.js"><link rel="prefetch" href="/assets/js/30.d2654359.js"><link rel="prefetch" href="/assets/js/31.c57cf20e.js"><link rel="prefetch" href="/assets/js/32.ed5593a9.js"><link rel="prefetch" href="/assets/js/33.05f050d1.js"><link rel="prefetch" href="/assets/js/34.6d7f5b2f.js"><link rel="prefetch" href="/assets/js/35.67cc577c.js"><link rel="prefetch" href="/assets/js/36.0bbc204a.js"><link rel="prefetch" href="/assets/js/37.8ac35368.js"><link rel="prefetch" href="/assets/js/38.50bd8dba.js"><link rel="prefetch" href="/assets/js/39.38b783ce.js"><link rel="prefetch" href="/assets/js/4.66c035fd.js"><link rel="prefetch" href="/assets/js/40.cd3ee2ff.js"><link rel="prefetch" href="/assets/js/41.f4bec9a4.js"><link rel="prefetch" href="/assets/js/42.27fa7fec.js"><link rel="prefetch" href="/assets/js/43.2af4a015.js"><link rel="prefetch" href="/assets/js/44.8e48aaf4.js"><link rel="prefetch" href="/assets/js/45.d41c0319.js"><link rel="prefetch" href="/assets/js/46.de5cb880.js"><link rel="prefetch" href="/assets/js/47.cc7c8048.js"><link rel="prefetch" href="/assets/js/48.22c69558.js"><link rel="prefetch" href="/assets/js/49.cdd62276.js"><link rel="prefetch" href="/assets/js/5.632744e8.js"><link rel="prefetch" href="/assets/js/50.a7eebe42.js"><link rel="prefetch" href="/assets/js/51.a447aa90.js"><link rel="prefetch" href="/assets/js/52.c0f076a5.js"><link rel="prefetch" href="/assets/js/53.3564c5b0.js"><link rel="prefetch" href="/assets/js/54.c5c6e6be.js"><link rel="prefetch" href="/assets/js/55.0fcb916b.js"><link rel="prefetch" href="/assets/js/56.2812bd7d.js"><link rel="prefetch" href="/assets/js/57.4f95d22a.js"><link rel="prefetch" href="/assets/js/58.d9baba05.js"><link rel="prefetch" href="/assets/js/59.371bd0d7.js"><link rel="prefetch" href="/assets/js/6.85f26be6.js"><link rel="prefetch" href="/assets/js/60.a715876a.js"><link rel="prefetch" href="/assets/js/61.6b1a782b.js"><link rel="prefetch" href="/assets/js/62.11484b5e.js"><link rel="prefetch" href="/assets/js/63.7b92573e.js"><link rel="prefetch" href="/assets/js/64.98aee69e.js"><link rel="prefetch" href="/assets/js/65.aa40eacd.js"><link rel="prefetch" href="/assets/js/66.67703170.js"><link rel="prefetch" href="/assets/js/67.392b86af.js"><link rel="prefetch" href="/assets/js/68.9610b8e9.js"><link rel="prefetch" href="/assets/js/69.6277fc7a.js"><link rel="prefetch" href="/assets/js/7.b775b056.js"><link rel="prefetch" href="/assets/js/70.b47adb04.js"><link rel="prefetch" href="/assets/js/71.0051199b.js"><link rel="prefetch" href="/assets/js/72.fa131834.js"><link rel="prefetch" href="/assets/js/73.fd8d275f.js"><link rel="prefetch" href="/assets/js/74.82095aed.js"><link rel="prefetch" href="/assets/js/75.41fad4ea.js"><link rel="prefetch" href="/assets/js/76.36bb1714.js"><link rel="prefetch" href="/assets/js/77.83c409c1.js"><link rel="prefetch" href="/assets/js/78.ca197ebf.js"><link rel="prefetch" href="/assets/js/79.9f0de524.js"><link rel="prefetch" href="/assets/js/80.7dd0f8a1.js"><link rel="prefetch" href="/assets/js/81.a5d44424.js"><link rel="prefetch" href="/assets/js/82.03d59f96.js"><link rel="prefetch" href="/assets/js/83.43da9399.js"><link rel="prefetch" href="/assets/js/84.e9ab171d.js"><link rel="prefetch" href="/assets/js/85.523fe07f.js"><link rel="prefetch" href="/assets/js/86.90aac9c6.js"><link rel="prefetch" href="/assets/js/87.1af6082d.js"><link rel="prefetch" href="/assets/js/88.3d7d10f0.js"><link rel="prefetch" href="/assets/js/89.69f4fbaf.js"><link rel="prefetch" href="/assets/js/90.30407e67.js"><link rel="prefetch" href="/assets/js/91.94355f67.js"><link rel="prefetch" href="/assets/js/92.8247a2fb.js"><link rel="prefetch" href="/assets/js/93.245ee436.js"><link rel="prefetch" href="/assets/js/94.a212b15e.js"><link rel="prefetch" href="/assets/js/95.dec85448.js"><link rel="prefetch" href="/assets/js/96.77ebb7ae.js"><link rel="prefetch" href="/assets/js/97.0a615ee3.js"><link rel="prefetch" href="/assets/js/98.9d539c75.js"><link rel="prefetch" href="/assets/js/99.270c2389.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.b7a3ab4f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8c53e149.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">周岐的个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/java SE/guide.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/项目总结/Mybatis使用/Mybatis分页实现.html" class="nav-link">
  项目总结
</a></div><div class="nav-item"><a href="/Java面试题/Java基础面试题/==和equals的区别.html" class="nav-link">
  Java面试题
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/demo223" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/zhouqi-5zipq" target="_blank" rel="noopener noreferrer" class="nav-link external">
  语雀
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/java SE/guide.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/项目总结/Mybatis使用/Mybatis分页实现.html" class="nav-link">
  项目总结
</a></div><div class="nav-item"><a href="/Java面试题/Java基础面试题/==和equals的区别.html" class="nav-link">
  Java面试题
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/demo223" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/zhouqi-5zipq" target="_blank" rel="noopener noreferrer" class="nav-link external">
  语雀
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/java SE/guide" class="sidebar-heading clickable"><span>java SE</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>java web</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/java web/Mysql/mysql命令" class="sidebar-heading clickable open"><span>MySQL</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/java web/Mysql/mysql命令.html" class="sidebar-link">mysql命令</a></li><li><a href="/java web/Mysql/增删改查.html" class="sidebar-link">增删改查</a></li><li><a href="/java web/Mysql/函数.html" class="sidebar-link">函数</a></li><li><a href="/java web/Mysql/约束.html" class="sidebar-link">约束</a></li><li><a href="/java web/Mysql/多表查询.html" class="active sidebar-link">多表查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java web/Mysql/多表查询.html#多表查询介绍" class="sidebar-link">多表查询介绍</a></li><li class="sidebar-sub-header"><a href="/java web/Mysql/多表查询.html#多表查询使用" class="sidebar-link">多表查询使用</a></li><li class="sidebar-sub-header"><a href="/java web/Mysql/多表查询.html#自连接" class="sidebar-link">自连接</a></li><li class="sidebar-sub-header"><a href="/java web/Mysql/多表查询.html#联合查询" class="sidebar-link">联合查询</a></li><li class="sidebar-sub-header"><a href="/java web/Mysql/多表查询.html#子查询" class="sidebar-link">子查询</a></li></ul></li><li><a href="/java web/Mysql/事务.html" class="sidebar-link">事务</a></li><li><a href="/java web/Mysql/mysql习题.html" class="sidebar-link">mysql习题</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/java web/JDBC/JDBC" class="sidebar-heading clickable"><span>JDBC</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/java web/Maven/Maven" class="sidebar-heading clickable"><span>Maven</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/java web/Mybatis/Mybatis入门" class="sidebar-heading clickable"><span>Mybatis</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/java web/Mybatis-Plus/Mybatis-Plus" class="sidebar-heading clickable"><span>mybatis-plus</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/java web/Tomcat/Tomcat" class="sidebar-heading clickable"><span>Tomcat</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/java web/request和response/request和response" class="sidebar-heading clickable"><span>request和response</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mybatis-Plus</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常用工具类</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java面试题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/SpringBoot文档/01-Spring-IOC" class="sidebar-heading clickable"><span>SpringBoot文档</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/微服务文档/SpringCloud介绍" class="sidebar-heading clickable"><span>微服务文档</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="多表查询"><a href="#多表查询" class="header-anchor">#</a> 多表查询</h1> <h2 id="多表查询介绍"><a href="#多表查询介绍" class="header-anchor">#</a> 多表查询介绍</h2> <p>多表查询一般分为以下3种</p> <ul><li>一对多(多对一)</li> <li>多对多</li> <li>一对一</li></ul> <h3 id="一对多"><a href="#一对多" class="header-anchor">#</a> 一对多</h3> <p>案例：部门 与 员工的关系 关系: 一个部门对应多个员工，一个员工对应一个部门</p> <p>实现：在多的一方建立外键，指向一的一方的主键</p> <p><img src="https://raw.githubusercontent.com/demo223/pictures/master/img/image-20221103170255408.png" alt="image-20221103170255408"></p> <h3 id="多对多"><a href="#多对多" class="header-anchor">#</a> 多对多</h3> <p>案例：学生 与 课程的关系 关系: 一个学生可以选修多门课程，一门课程也可以供多个学生选择</p> <p>实现：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</p> <p><img src="https://raw.githubusercontent.com/demo223/pictures/master/img/image-20221103172057984.png" alt="image-20221103172057984"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> student
<span class="token punctuation">(</span>
    id   <span class="token keyword">int</span> <span class="token keyword">auto_increment</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">comment</span> <span class="token string">'主键ID'</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>
    <span class="token keyword">no</span>   <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'学号'</span>
<span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'学生表'</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> student
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'2000100101'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'李四'</span><span class="token punctuation">,</span>
        <span class="token string">'2000100102'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'王五'</span><span class="token punctuation">,</span> <span class="token string">'2000100103'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'赵六'</span><span class="token punctuation">,</span> <span class="token string">'2000100104'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> course
<span class="token punctuation">(</span>
    id   <span class="token keyword">int</span> <span class="token keyword">auto_increment</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">comment</span> <span class="token string">'主键ID'</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'课程名称'</span>
<span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'课程表'</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> course
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'Java'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'PHP'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'MySQL'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'Hadoop'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       
<span class="token keyword">create</span> <span class="token keyword">table</span> student_course
<span class="token punctuation">(</span>
    id        <span class="token keyword">int</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">'主键'</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    studentid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'学生ID'</span><span class="token punctuation">,</span>
    courseid  <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'课程ID'</span><span class="token punctuation">,</span>
    <span class="token keyword">constraint</span> fk_courseid <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>courseid<span class="token punctuation">)</span> <span class="token keyword">references</span> course <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">constraint</span> fk_studentid <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>studentid<span class="token punctuation">)</span> <span class="token keyword">references</span> student <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'学生课程中间表'</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> student_course
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="一对一"><a href="#一对一" class="header-anchor">#</a> 一对一</h3> <p>案例：用户 与 用户详情的关系 关系: 一对一关系，多用于单表拆分，将一张表的基础字段放在一张表中，其他详情字段放在另 一张表中，以提升操作效率</p> <p>实现：在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的(<code>unique</code>)</p> <p><img src="https://raw.githubusercontent.com/demo223/pictures/master/img/image-20221103191124201.png" alt="image-20221103191124201"></p> <h2 id="多表查询使用"><a href="#多表查询使用" class="header-anchor">#</a> 多表查询使用</h2> <ul><li>连接查询
<ul><li>内连接
<ul><li>等值内连接</li> <li>自连接</li></ul></li> <li>外连接
<ul><li>左外连接</li> <li>右外连接</li></ul></li></ul></li></ul> <blockquote><p>连接查询需要建立连接条件，如果没有连接条件就会产生笛卡尔集现象。</p></blockquote> <h3 id="内连接"><a href="#内连接" class="header-anchor">#</a> 内连接</h3> <p>相当于查询表A、表B交集部分数据</p> <p>内连接的语法分为两种: 隐式内连接、显式内连接。</p> <h4 id="隐式内连接"><a href="#隐式内连接" class="header-anchor">#</a> 隐式内连接</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> table1<span class="token punctuation">,</span>
     table2
<span class="token keyword">where</span> 连接条件<span class="token punctuation">(</span>例如table1<span class="token punctuation">.</span>字段<span class="token number">1</span> <span class="token operator">=</span> table2<span class="token punctuation">.</span>字段<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="显示内连接"><a href="#显示内连接" class="header-anchor">#</a> 显示内连接</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> table1 t1
         <span class="token keyword">inner</span> <span class="token keyword">join</span> table2 t2 <span class="token keyword">on</span> 连接条件<span class="token punctuation">(</span>例如t1<span class="token punctuation">.</span>字段<span class="token number">1</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span>字段<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="使用实例"><a href="#使用实例" class="header-anchor">#</a> 使用实例</h4> <p>有如下实例，在员工表和部门表中查询员工的姓名、性别和部门名称</p> <p><img src="https://raw.githubusercontent.com/demo223/pictures/master/img/image-20221103195509015.png" alt="image-20221103195509015"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 需求：查询员工的姓名、性别和部门名称</span>
<span class="token comment">-- 使用隐式内连接</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span> emp e<span class="token punctuation">,</span>
     dept d
<span class="token keyword">where</span> e<span class="token punctuation">.</span>dep_id <span class="token operator">=</span> d<span class="token punctuation">.</span>did<span class="token punctuation">;</span>

<span class="token comment">-- 使用显示内连接</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span> emp e
         <span class="token keyword">inner</span> <span class="token keyword">join</span> dept d <span class="token keyword">on</span> e<span class="token punctuation">.</span>dep_id <span class="token operator">=</span> d<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>查询结果如下</p> <table><thead><tr><th style="text-align:left;">name</th> <th style="text-align:left;">gender</th> <th style="text-align:left;">dname</th></tr></thead> <tbody><tr><td style="text-align:left;">孙悟空</td> <td style="text-align:left;">男</td> <td style="text-align:left;">研发部</td></tr> <tr><td style="text-align:left;">蜘蛛精</td> <td style="text-align:left;">女</td> <td style="text-align:left;">研发部</td></tr> <tr><td style="text-align:left;">猪八戒</td> <td style="text-align:left;">男</td> <td style="text-align:left;">市场部</td></tr> <tr><td style="text-align:left;">唐僧</td> <td style="text-align:left;">男</td> <td style="text-align:left;">市场部</td></tr> <tr><td style="text-align:left;">白骨精</td> <td style="text-align:left;">女</td> <td style="text-align:left;">财务部</td></tr></tbody></table> <blockquote><p><strong>注意</strong>：</p> <p>关于<strong>表的别名</strong>，表一旦起了别名就不能再使用原来的表名来指定字段了，只能使用表的别名来指定字段。</p></blockquote> <h4 id="使用的区别"><a href="#使用的区别" class="header-anchor">#</a> 使用的区别</h4> <p>在多表查询中，一些数据库开发人员更喜欢使用<code>where</code>来做<code>join</code>，比如：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> a<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> b<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token keyword">Date</span> <span class="token keyword">FROM</span> Customers a<span class="token punctuation">,</span> Sales b <span class="token keyword">WHERE</span> a<span class="token punctuation">.</span>ID <span class="token operator">=</span> b<span class="token punctuation">.</span>ID<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>缺点：在上面语句中，实际上是创建了两张表的笛卡尔积，所有可能的组合都会被创建出来。在笛卡尔连接中，在上面的例子中，如果有<code>1000</code>顾客和<code>1000</code>条销售记录，这个查询会先产生<code>1000000</code>个结果，然后通过正确的 ID过滤出<code>1000</code>条记录。 这是一种低效利用数据库资源，数据库多做100倍的工作。 在大型数据库中，笛卡尔连接是一个大问题，对两个大表的笛卡尔积会创建数10亿或万亿的记录。</p> <p>为了避免创建笛卡尔积，应该使用<code>inner join</code> ：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> a<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> b<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token keyword">Date</span> <span class="token keyword">FROM</span> Customers a <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Sales b <span class="token keyword">ON</span> a<span class="token punctuation">.</span>ID <span class="token operator">=</span> b<span class="token punctuation">.</span>ID<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>优点：如上面语句，使用<code>inner join</code> 这样数据库就只产生等于ID 的1000条目标结果。增加了查询效率。</p> <p>有些数据库系统会识别出 <code>where</code>连接并自动转换为 <code>inner join</code>。在这些数据库系统中，<code>where</code>连接与<code>inner join</code>就没有性能差异。但是， INNER JOIN 是所有数据库都能识别的，因此<code>DBA</code>会建议在你的环境中使用它。</p> <h3 id="外连接"><a href="#外连接" class="header-anchor">#</a> 外连接</h3> <p>对于上面的查询结果观察可以看出没有白龙马的数据，由于白龙马不存在外键(为<code>null</code>)导致最终的查询结果中不存在白龙马的数据，导致数据丢失，所以如果想要保留白龙马的数据则需要使用外连接</p> <p>外连接分为两种，分别是：左外连接 和 右外连接。</p> <h4 id="左外连接"><a href="#左外连接" class="header-anchor">#</a> 左外连接</h4> <p>左外连接相当于查询表1(左表)的所有数据，当然也包含表1和表2交集部分的数据。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> table1 t1 <span class="token keyword">left</span> <span class="token punctuation">[</span><span class="token keyword">outer</span><span class="token punctuation">]</span> <span class="token keyword">join</span> table2 t2 <span class="token keyword">on</span> 连接条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="右外连接"><a href="#右外连接" class="header-anchor">#</a> 右外连接</h4> <p>右外连接相当于查询表2(右表)的所有数据，当然也包含表1和表2交集部分的数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> table1 t1 <span class="token keyword">right</span> <span class="token punctuation">[</span><span class="token keyword">outer</span><span class="token punctuation">]</span> <span class="token keyword">join</span> table2 t2 <span class="token keyword">on</span> 连接条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>注意：</p> <p>​         左外连接和右外连接是可以相互替换的，只需要调整在连接查询时<code>SQL</code>语句中的表结构的顺序即可。开发中更偏向于使用左外连接。</p></blockquote> <h4 id="使用实例-2"><a href="#使用实例-2" class="header-anchor">#</a> 使用实例</h4> <p>查询<code>emp</code>表的所有数据，和对应的部门信息。数据及表格和上面的内连接表格一致。</p> <p>由于需求中提到，要查询<code>emp</code>的所有数据，所以是不能内连接查询的，需要考虑使用外连接查询。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 需求：查询所有员工的和员工的部门信息，没有部门的员工信息也要查询出来</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span> emp e <span class="token keyword">left</span> <span class="token keyword">join</span> dept d <span class="token keyword">on</span> d<span class="token punctuation">.</span>did <span class="token operator">=</span> e<span class="token punctuation">.</span>dep_id<span class="token punctuation">;</span>
<span class="token comment"># 上面的是左外连接</span>
<span class="token comment"># 下面的是右外连接</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span> dept d  <span class="token keyword">right</span> <span class="token keyword">join</span> emp e <span class="token keyword">on</span> e<span class="token punctuation">.</span>dep_id <span class="token operator">=</span> d<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>查询的结果是一样的</p> <table><thead><tr><th style="text-align:left;">id</th> <th style="text-align:left;">name</th> <th style="text-align:left;">gender</th> <th style="text-align:left;">salary</th> <th style="text-align:left;">join_date</th> <th style="text-align:left;">dep_id</th> <th style="text-align:left;">dname</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">孙悟空</td> <td style="text-align:left;">男</td> <td style="text-align:left;">7200</td> <td style="text-align:left;">2013-02-24</td> <td style="text-align:left;">1</td> <td style="text-align:left;">研发部</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">猪八戒</td> <td style="text-align:left;">男</td> <td style="text-align:left;">3600</td> <td style="text-align:left;">2010-12-02</td> <td style="text-align:left;">2</td> <td style="text-align:left;">市场部</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">唐僧</td> <td style="text-align:left;">男</td> <td style="text-align:left;">9000</td> <td style="text-align:left;">2008-08-08</td> <td style="text-align:left;">2</td> <td style="text-align:left;">市场部</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;">白骨精</td> <td style="text-align:left;">女</td> <td style="text-align:left;">5000</td> <td style="text-align:left;">2015-10-07</td> <td style="text-align:left;">3</td> <td style="text-align:left;">财务部</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;">蜘蛛精</td> <td style="text-align:left;">女</td> <td style="text-align:left;">4500</td> <td style="text-align:left;">2011-03-14</td> <td style="text-align:left;">1</td> <td style="text-align:left;">研发部</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;">小白龙</td> <td style="text-align:left;">男</td> <td style="text-align:left;">2500</td> <td style="text-align:left;">2011-02-14</td> <td style="text-align:left;">NULL</td> <td style="text-align:left;">NULL</td></tr></tbody></table> <h4 id="关于左连接left-join和where"><a href="#关于左连接left-join和where" class="header-anchor">#</a> 关于左连接<code>left join</code>和<code>where</code></h4> <p>数据库在通过连接两张或多张表来返回记录时，都会生成一张中间的<strong>临时表</strong>，然后再将这张临时表返回给用户。</p> <p>在使用<code>left join</code>时，<code>on</code>和<code>where</code>条件的区别如下：</p> <ol><li><strong><code>on</code>条件是在生成临时表时使用的条件，它不管<code>on</code>中的条件是否为真，都会返回左边表中的记录</strong>。</li> <li><strong><code>where</code>条件是在临时表生成好后，再对临时表进行过滤的条件</strong>。这时已经没有<code>left join</code>的含义（必须返回左边表的记录）了，<strong>条件不为真的就全部过滤掉</strong>。</li></ol> <h2 id="自连接"><a href="#自连接" class="header-anchor">#</a> 自连接</h2> <p>自连接查询，顾名思义，就是自己连接自己，也就是把一张表连接查询多次。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名 t1 <span class="token keyword">join</span> t1 表名 t2 <span class="token keyword">on</span> 连接条件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>对于自连接查询，可以是内连接查询，也可以是外连接查询。</p> <blockquote><p>注意：</p> <p>自连接查询的时候，必须要为表起别名，否则不清楚到底是哪一个表的字段。</p></blockquote> <p>例如：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 自连接(内连接方式)</span>
<span class="token keyword">select</span> a<span class="token punctuation">.</span>name<span class="token punctuation">,</span>a<span class="token punctuation">.</span>age<span class="token punctuation">,</span>b<span class="token punctuation">.</span>name<span class="token punctuation">,</span>b<span class="token punctuation">.</span>age
<span class="token keyword">from</span> tb_user a <span class="token punctuation">,</span> tb_user b <span class="token keyword">where</span> a<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
<span class="token comment"># 自连接(外连接方式)</span>
<span class="token keyword">select</span> a<span class="token punctuation">.</span>name<span class="token punctuation">,</span>a<span class="token punctuation">.</span>age<span class="token punctuation">,</span>b<span class="token punctuation">.</span>name<span class="token punctuation">,</span>b<span class="token punctuation">.</span>age
<span class="token keyword">from</span> tb_user a <span class="token keyword">left</span> <span class="token keyword">join</span> tb_user b <span class="token keyword">on</span> a<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>查询结果如下</p> <table><thead><tr><th style="text-align:left;">name</th> <th style="text-align:left;">age</th> <th style="text-align:left;">name</th> <th style="text-align:left;">age</th></tr></thead> <tbody><tr><td style="text-align:left;">张三</td> <td style="text-align:left;">45</td> <td style="text-align:left;">张三</td> <td style="text-align:left;">45</td></tr> <tr><td style="text-align:left;">李四</td> <td style="text-align:left;">35</td> <td style="text-align:left;">李四</td> <td style="text-align:left;">35</td></tr> <tr><td style="text-align:left;">王五</td> <td style="text-align:left;">55</td> <td style="text-align:left;">王五</td> <td style="text-align:left;">55</td></tr> <tr><td style="text-align:left;">赵六</td> <td style="text-align:left;">50</td> <td style="text-align:left;">赵六</td> <td style="text-align:left;">50</td></tr></tbody></table> <h2 id="联合查询"><a href="#联合查询" class="header-anchor">#</a> 联合查询</h2> <p>对于<code>union</code>查询，就是把多次查询的结果合并起来，形成一个新的查询结果集。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表<span class="token number">1</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">union</span> <span class="token punctuation">[</span><span class="token keyword">all</span><span class="token punctuation">]</span>
<span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表<span class="token number">2</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>对于联合查询的多张表的列数必须保持一致，字段类型也需要保持一致。</p> <p><strong><code>union all</code> 会将全部的数据直接合并在一起，<code>union</code> 会对合并之后的数据去重</strong>。</p> <p>例如有一个学生表<code>student</code>和一个老师表<code>teacher</code></p> <table><thead><tr><th style="text-align:left;">id</th> <th style="text-align:left;">name</th> <th style="text-align:left;">age</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">张三</td> <td style="text-align:left;">12</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">李四</td> <td style="text-align:left;">23</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">王五</td> <td style="text-align:left;">28</td></tr></tbody></table> <table><thead><tr><th style="text-align:left;">id</th> <th style="text-align:left;">name</th> <th style="text-align:left;">age</th> <th style="text-align:left;">salary</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">马老师</td> <td style="text-align:left;">56</td> <td style="text-align:left;">12000</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">王老师</td> <td style="text-align:left;">32</td> <td style="text-align:left;">25000</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">李老师</td> <td style="text-align:left;">26</td> <td style="text-align:left;">13000</td></tr></tbody></table> <p>将2个表进行合并</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> s<span class="token punctuation">.</span>name<span class="token punctuation">,</span> s<span class="token punctuation">.</span>age
<span class="token keyword">from</span> student s
<span class="token keyword">union</span> <span class="token keyword">all</span>
<span class="token keyword">select</span> t<span class="token punctuation">.</span>name<span class="token punctuation">,</span> t<span class="token punctuation">.</span>age
<span class="token keyword">from</span> teacher t<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><strong>注意</strong>：</p> <ol><li>在进行联合查询的时候，2个表的字段的类型要一样，如果字段的数量不一致会报错。</li> <li>使用<code>union</code>命令时需要注意，只能在最后使用一个<code>order by</code>命令，将两个查询结果合在一起之后，再进行排序！绝对不能写两个<code>order by</code>命令。</li></ol></blockquote> <h2 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h2> <p><code>SQL</code>语句中嵌套<code>select</code>语句，称为嵌套查询，又称子查询</p> <p>根据子查询结果不同，分为：</p> <ol><li>标量子查询（子查询结果为单个值）</li> <li>列子查询(子查询结果为一列)</li> <li>行子查询(子查询结果为一行)</li> <li>表子查询(子查询结果为多行多列)</li></ol> <p>根据子查询位置，分为：</p> <ol><li><code>where</code>之后</li> <li><code>from</code>之后</li> <li><code>select</code>之后</li></ol> <p>数据库中的数据</p> <p>部门表<code>dept</code>如下</p> <table><thead><tr><th style="text-align:left;">did</th> <th style="text-align:left;">dname</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">研发部</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">市场部</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">财务部</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;">销售部</td></tr></tbody></table> <p>员工表<code>emp</code>如下</p> <table><thead><tr><th style="text-align:left;">id</th> <th style="text-align:left;">name</th> <th style="text-align:left;">gender</th> <th style="text-align:left;">salary</th> <th style="text-align:left;">join_date</th> <th style="text-align:left;">dep_id</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">孙悟空</td> <td style="text-align:left;">男</td> <td style="text-align:left;">7200</td> <td style="text-align:left;">2013-02-24</td> <td style="text-align:left;">1</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">猪八戒</td> <td style="text-align:left;">男</td> <td style="text-align:left;">3600</td> <td style="text-align:left;">2010-12-02</td> <td style="text-align:left;">2</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">唐僧</td> <td style="text-align:left;">男</td> <td style="text-align:left;">9000</td> <td style="text-align:left;">2008-08-08</td> <td style="text-align:left;">2</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;">白骨精</td> <td style="text-align:left;">女</td> <td style="text-align:left;">5000</td> <td style="text-align:left;">2015-10-07</td> <td style="text-align:left;">3</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;">蜘蛛精</td> <td style="text-align:left;">女</td> <td style="text-align:left;">4500</td> <td style="text-align:left;">2011-03-14</td> <td style="text-align:left;">1</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;">小白龙</td> <td style="text-align:left;">男</td> <td style="text-align:left;">2500</td> <td style="text-align:left;">2011-02-14</td> <td style="text-align:left;">NULL</td></tr></tbody></table> <ol><li><p><strong>标量子查询</strong></p> <p>子查询返回的结果是单个值（数字、字符串、日期等），最简单的形式，这种子查询称为标量子查询。</p> <p>常用的操作符：<code>=</code> <code>&lt;&gt;</code> <code>&gt;</code> <code>&gt;=</code> <code>&lt;</code> <code>&lt;=</code></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 需求：查询工资高于猪八戒的员工信息，使用子查询</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'猪八戒'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>标量子查询结果(单个值)</p> <table><thead><tr><th style="text-align:left;">salary</th></tr></thead> <tbody><tr><td style="text-align:left;">3600</td></tr></tbody></table></li> <li><p><strong>列子查询</strong></p> <p>子查询返回的结果是一列（可以是多行），这种子查询称为列子查询。</p> <p>常用的操作符：<code>in</code>、<code>not in</code> 、 <code>any</code> 、<code>some</code> 、 <code>all</code></p> <table><thead><tr><th style="text-align:center;">操作符</th> <th style="text-align:center;">说明</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>in</code></td> <td style="text-align:center;">在指定的集合范围内，多选一</td></tr> <tr><td style="text-align:center;"><code>not in</code></td> <td style="text-align:center;">不在指定的范围内</td></tr> <tr><td style="text-align:center;"><code>any</code></td> <td style="text-align:center;">子查询的返回列表中，有一个满足即可</td></tr> <tr><td style="text-align:center;"><code>some</code></td> <td style="text-align:center;">与<code>any</code>等同，使用<code>some</code>也可以使用<code>any</code></td></tr> <tr><td style="text-align:center;"><code>all</code></td> <td style="text-align:center;">子查询返回列表的所有值都必须满足</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 需求：查询财务部和市场部所有的员工信息，使用子查询</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> dep_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> did
                 <span class="token keyword">from</span> dept
                 <span class="token keyword">where</span> dname <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">'财务部'</span><span class="token punctuation">,</span> <span class="token string">'市场部'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>列子查询结果(多行单列)</p> <table><thead><tr><th style="text-align:left;">did</th></tr></thead> <tbody><tr><td style="text-align:left;">2</td></tr> <tr><td style="text-align:left;">3</td></tr></tbody></table></li> <li><p><strong>行子查询</strong></p> <p>子查询返回的结果是一行（可以是多列），这种子查询称为行子查询。</p> <p>常用的操作符：<code>=</code> 、<code>&lt;&gt;</code> (<code>!=</code>)、<code>in</code> 、<code>not in</code></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> salary
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> gender<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> name<span class="token punctuation">,</span> gender <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'唐%'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><table><thead><tr><th style="text-align:left;">name</th> <th style="text-align:left;">gender</th></tr></thead> <tbody><tr><td style="text-align:left;">唐僧</td> <td style="text-align:left;">男</td></tr></tbody></table></li> <li><p><strong>表子查询</strong></p> <p>子查询返回的结果是多行多列，这种子查询称为表子查询。</p> <p>常用的操作符：<code>in</code></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 需求：查询入职日期是'2011-11-11'之后的员工信息和部门信息，使用子查询</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span>
      <span class="token keyword">from</span> emp
      <span class="token keyword">where</span> join_date <span class="token operator">&gt;</span> <span class="token string">'2011-11-11'</span><span class="token punctuation">)</span> t<span class="token punctuation">,</span>
     dept d
<span class="token keyword">where</span> t<span class="token punctuation">.</span>dep_id <span class="token operator">=</span> d<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>表子查询结果为</p> <table><thead><tr><th style="text-align:left;">id</th> <th style="text-align:left;">name</th> <th style="text-align:left;">gender</th> <th style="text-align:left;">salary</th> <th style="text-align:left;">join_date</th> <th style="text-align:left;">dep_id</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">孙悟空</td> <td style="text-align:left;">男</td> <td style="text-align:left;">7200</td> <td style="text-align:left;">2013-02-24</td> <td style="text-align:left;">1</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;">白骨精</td> <td style="text-align:left;">女</td> <td style="text-align:left;">5000</td> <td style="text-align:left;">2015-10-07</td> <td style="text-align:left;">3</td></tr></tbody></table></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">2023/1/9</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/java web/Mysql/约束.html" class="prev">
        约束
      </a></span> <span class="next"><a href="/java web/Mysql/事务.html">
        事务
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a19eb3cb.js" defer></script><script src="/assets/js/2.34fff606.js" defer></script><script src="/assets/js/1.16393a26.js" defer></script><script src="/assets/js/171.6f79aeb1.js" defer></script>
  </body>
</html>
